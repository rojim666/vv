"use strict";(self["webpackChunkzmwk_session_archive"]=self["webpackChunkzmwk_session_archive"]||[]).push([[576],{391:function(e,t,n){n.d(t,{Ao:function(){return c},C6:function(){return u},EX:function(){return i},Q4:function(){return l},XP:function(){return s},ji:function(){return m},lS:function(){return r},sn:function(){return o},uM:function(){return d}});var a=n(7277);const i=e=>a.Ay.get("/modules/timeout_reply_single/api/reply-rules",{params:e}),u=e=>a.Ay.post("/modules/timeout_reply_single/api/reply-rules",e),l=e=>a.Ay.get("/modules/timeout_reply_single/api/rules",{params:e}),s=e=>a.Ay.post("/modules/timeout_reply_single/api/rules",e),r=e=>a.Ay.get(`/modules/timeout_reply_single/api/rules/${e}`),o=e=>a.Ay.delete(`/modules/timeout_reply_single/api/rules/${e}`),c=(e,t)=>a.Ay.put(`/modules/timeout_reply_single/api/rules/${e}`,t),d=e=>a.Ay.put(`/modules/timeout_reply_single/api/rules/${e}/enable`),m=e=>a.Ay.put(`/modules/timeout_reply_single/api/rules/${e}/disable`)},9660:function(e,t,n){n.d(t,{v:function(){return i},z:function(){return u}});n(4114);var a=n(8298);function i(e){return e.map((e=>{let t=e.time_period_list.map((e=>({times:[e.start,e.end]})));return{week:e.week_day_list,ranges:t}}))}function u(e){switch(Number(e.inspect_time_type.value)){case 1:return"全天";case 2:return"工作时间";case 3:let t,n,i=[];return e.custom_time_list.map((e=>{t=[],n=[],e.week_day_list.map((e=>t.push((0,a.bG)(e)))),e.time_period_list.map((e=>n.push(`${e.start}~${e.end}`))),i.push(`${t.join("、")} ${n.join(" ")}`)})),i}}},817:function(e,t,n){n.d(t,{A:function(){return d}});var a=n(6768),i=(n(4114),n(144)),u=n(1387),l={__name:"zmNavTabs",props:{active:{type:[Number,String]},tabs:{type:Array,required:!0}},setup(e){const t=(0,u.rd)(),n=(0,i.KR)("index"),l=e;function s(){const e=l.tabs.find((e=>e.key===n.value));e.route&&t.push({path:e.route})}return(0,a.sV)((()=>{l.active?n.value=l.active:n.value=l.tabs[0]?.key})),(t,i)=>{const u=(0,a.g2)("a-tab-pane"),l=(0,a.g2)("a-tabs");return(0,a.uX)(),(0,a.Wv)(l,{"active-key":n.value,"onUpdate:activeKey":i[0]||(i[0]=e=>n.value=e),onChange:s,class:"zm-nav-tabs"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.tabs,(e=>((0,a.uX)(),(0,a.Wv)(u,{key:e.key,tab:e.title},null,8,["tab"])))),128))])),_:1},8,["active-key"])}}};const s=l;var r=s,o={__name:"mainNav",props:{active:{type:[Number,String]}},setup(e){const t=[{key:"index",title:"单聊超时",route:"/module/timeout-reply-single/index"},{key:"rule",title:"回复规则",route:"/module/timeout-reply-single/rule"}];return(n,i)=>((0,a.uX)(),(0,a.Wv)(r,{tabs:t,active:e.active},null,8,["active"]))}};const c=o;var d=c},8576:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});n(4114);var a=n(6768),i=n(144),u=n(4232),l=n(1387),s=n(7423),r=n(7694),o=n(3536),c=n(817),d=n(391),m=(n(8298),n(9660));const p={class:"zm-main-content"},_={class:"mt16"},f={class:"zm-line-clamp1"},y={key:1},v=["innerHTML"],k={key:1},h=["onClick"],g=["onClick"];var b={__name:"index",setup(e){const t=(0,l.rd)(),n=(0,i.KR)(!1),b=(0,i.KR)([{title:"规则名称",dataIndex:"name",width:160},{title:"质检员工",dataIndex:"staff_user_names",width:160},{title:"质检时间",dataIndex:"check_time_text",width:160},{title:"提醒规则",dataIndex:"notice_rule_text",width:160},{title:"提醒员工",dataIndex:"notice_staff_names",width:160},{title:"状态",dataIndex:"enabled",width:110},{title:"操作",dataIndex:"operate",width:110,fixed:"right"}]),x=(0,i.KR)([]),C=(0,i.Kh)({total:0,current:1,pageSize:50,showSizeChanger:!0,pageSizeOptions:["50","100","300","500"]});function A(){x.value=[],C.current=1,C.total=0,w()}function w(){n.value=!0,(0,d.Q4)({page:C.current,size:C.pageSize}).then((e=>{let t=e.data.items||[];t.map((e=>{e.staff_user_names=e.staff_user_list.map((e=>e.name)).toString(),e.notice_staff_names=e.remind_staff_user_list.map((e=>e.name)),e.is_remind_staff_himself&&e.notice_staff_names.unshift("员工本人"),e.notice_staff_names=e.notice_staff_names.toString(),e.check_time_text=(0,m.z)(e),e.notice_rule_text=`超过${e.timeout_value}分钟发送提醒`})),x.value=t,C.total=Number(e.data.total)})).finally((()=>{n.value=!1}))}function X(e){Object.assign(C,e),w()}function z(){t.push({path:"/module/timeout-reply-single/store"})}function I(e){t.push({path:"/module/timeout-reply-single/store",query:{rule_id:e.id}})}function $(e){let t,n;e.enabled?(n=d.uM,t="开启"):(n=d.ji,t="关闭");const a=()=>e.enabled=!e.enabled;s.A.confirm({title:"提示",content:`确认${t}该规则`,onOk:()=>{n(e.id).then((e=>{r.Ay.success(`已${t}`),w()})).catch((()=>{a()}))},onCancel:()=>{a()}})}function K(e){s.A.confirm({title:"提示",content:"确认删除该规则？",onOk:()=>{(0,d.sn)(e.id).then((e=>{r.Ay.success("操作完成"),w()}))}})}return(0,a.sV)((()=>{A()})),(e,t)=>{const l=(0,a.g2)("a-alert"),s=(0,a.g2)("a-button"),r=(0,a.g2)("a-tooltip"),d=(0,a.g2)("a-switch"),m=(0,a.g2)("a-table");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(c.A,{active:"index"}),(0,a.Lk)("div",p,[(0,a.bF)(l,{class:"zm-custom-alert",type:"info","show-icon":""},{message:(0,a.k6)((()=>t[0]||(t[0]=[(0,a.Lk)("div",{class:"fw600"},"功能说明：",-1),(0,a.Lk)("div",null," 当单聊的客户发送消息员工未回复时，按照规则，可设置给指定员工以及员工本人发送消息提醒，及时回复消息并处理 ",-1)]))),_:1}),(0,a.Lk)("div",_,[(0,a.bF)(s,{type:"primary",icon:(0,a.h)((0,i.R1)(o.A)),onClick:z},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.eW)("新增规则")]))),_:1},8,["icon"]),(0,a.bF)(m,{class:"mt8",loading:n.value,"data-source":x.value,columns:b.value,pagination:C,onChange:X,scroll:{x:1400}},{bodyCell:(0,a.k6)((({column:e,text:t,record:n})=>["staff_user_list"===e.dataIndex?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[t.length>10?((0,a.uX)(),(0,a.Wv)(r,{key:0,title:t},{default:(0,a.k6)((()=>[(0,a.Lk)("div",f,(0,u.v_)(t),1)])),_:2},1032,["title"])):((0,a.uX)(),(0,a.CE)("span",y,(0,u.v_)(t),1))],64)):"enabled"===e.dataIndex?((0,a.uX)(),(0,a.Wv)(d,{key:1,checked:n.enabled,"onUpdate:checked":e=>n.enabled=e,onChange:e=>$(n),"checked-children":"开","un-checked-children":"关"},null,8,["checked","onUpdate:checked","onChange"])):"check_time_text"===e.dataIndex?((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[Array.isArray(t)?((0,a.uX)(),(0,a.Wv)(r,{key:0},{title:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t},(0,u.v_)(e),1)))),128))])),default:(0,a.k6)((()=>[(0,a.Lk)("div",{class:"zm-line-clamp1",innerHTML:t.join("<br/>")},null,8,v)])),_:2},1024)):((0,a.uX)(),(0,a.CE)("span",k,(0,u.v_)(t),1))],64)):"operate"===e.dataIndex?((0,a.uX)(),(0,a.CE)(a.FK,{key:3},[(0,a.Lk)("a",{onClick:e=>I(n)},"编辑",8,h),(0,a.Lk)("a",{class:"ml16",onClick:e=>K(n)},"删除",8,g)],64)):(0,a.Q3)("",!0)])),_:1},8,["loading","data-source","columns","pagination"])])])])}}},x=n(1241);const C=(0,x.A)(b,[["__scopeId","data-v-201728fb"]]);var A=C}}]);