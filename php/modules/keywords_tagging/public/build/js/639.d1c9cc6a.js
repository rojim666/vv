"use strict";(self["webpackChunkzmwk_session_archive"]=self["webpackChunkzmwk_session_archive"]||[]).push([[639],{8292:function(t,e,a){a.d(e,{A:function(){return d}});var n=a(6768);const i={class:"loading-box"};function l(t,e){const a=(0,n.g2)("a-spin");return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.bF)(a)])}var s=a(1241);const c={},o=(0,s.A)(c,[["render",l],["__scopeId","data-v-3d53ffb8"]]);var d=o},4686:function(t,e,a){a.d(e,{A:function(){return r}});var n=a(6768),i=a(4232);const l={class:"_main-nav"},s={key:1,class:"title"};var c={__name:"mainNavbar",props:{title:{type:[Array,String]}},setup(t){return(e,a)=>{const c=(0,n.g2)("router-link"),o=(0,n.g2)("a-breadcrumb-item"),d=(0,n.g2)("a-breadcrumb");return(0,n.uX)(),(0,n.CE)("div",l,[Array.isArray(t.title)?((0,n.uX)(),(0,n.Wv)(d,{key:0},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.title,((t,e)=>((0,n.uX)(),(0,n.Wv)(o,{key:e},{default:(0,n.k6)((()=>[t.route?((0,n.uX)(),(0,n.Wv)(c,{key:0,to:t.route},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(t.name),1)])),_:2},1032,["to"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,i.v_)(t.name),1)],64))])),_:2},1024)))),128))])),_:1})):((0,n.uX)(),(0,n.CE)("div",s,(0,i.v_)(t.title),1))])}}},o=a(1241);const d=(0,o.A)(c,[["__scopeId","data-v-b8774510"]]);var r=d},3188:function(t,e,a){a.d(e,{A:function(){return I}});var n=a(6768),i=a(4232),l=a(144),s=a(4164),c=a(1387);const o={class:"statistic-box"},d={class:"statistic-item"},r={class:"statistic-content-box"},u={class:"statistic-content-item"},_={class:"statistic-content-item-info"},v={class:"statistic-content-item-info-num"},k={class:"statistic-item"},m={class:"statistic-content-box"},y={class:"statistic-content-item"},g={class:"statistic-content-item-info"},h={class:"statistic-content-item-info-num"},p={class:"statistic-item"},f={class:"statistic-content-box"},b={class:"statistic-content-item"},x={class:"statistic-content-item-info"},w={class:"statistic-content-item-info-num"};var C={__name:"statistic",setup(t){const e=(0,c.lq)(),a=(0,l.KR)(!1),C=(0,l.Kh)({today_num:0,total_num:0,yesterday_num:0}),L=()=>{a.value=!0;let t={};e.query.task_id&&(t.task_id=e.query.task_id),(0,s.Hk)(t).then((t=>{C.today_num=t.data.today_num,C.total_num=t.data.total_num,C.yesterday_num=t.data.yesterday_num})).finally((()=>{a.value=!1}))};return(0,n.sV)((()=>{L()})),(t,e)=>((0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",d,[e[0]||(e[0]=(0,n.Lk)("div",{class:"statistic-item-title"},"打标签数",-1)),(0,n.Lk)("div",r,[(0,n.Lk)("div",u,[(0,n.Lk)("div",_,[(0,n.Lk)("div",v,(0,i.v_)(C.total_num),1)])])])]),(0,n.Lk)("div",k,[e[1]||(e[1]=(0,n.Lk)("div",{class:"statistic-item-title"},"今日打标签数",-1)),(0,n.Lk)("div",m,[(0,n.Lk)("div",y,[(0,n.Lk)("div",g,[(0,n.Lk)("div",h,(0,i.v_)(C.today_num),1)])])])]),(0,n.Lk)("div",p,[e[2]||(e[2]=(0,n.Lk)("div",{class:"statistic-item-title"},"昨日打标签数",-1)),(0,n.Lk)("div",f,[(0,n.Lk)("div",b,[(0,n.Lk)("div",x,[(0,n.Lk)("div",w,(0,i.v_)(C.yesterday_num),1)])])])])]))}},L=a(1241);const X=(0,L.A)(C,[["__scopeId","data-v-29c33bd2"]]);var I=X},8639:function(t,e,a){a.r(e),a.d(e,{default:function(){return O}});var n=a(6768),i=a(144),l=a(1387),s=a(8292),c=(a(4114),a(4232)),o=a(1576),d=a.n(o),r=a(3536),u=a(1644),_=a(7423),v=a(7694),k=a(3188),m=a(4164);const y={class:"zm-main-content"},g={class:"statistic-box"},h={class:"header mt16"},p={class:"zm-line-clamp2",style:{"max-height":"40px"}},f={key:1},b={key:2},x={key:3,class:"tages_wid"},w={style:{width:"500px"}},C={class:"nowrap flex"},L={class:"nowrap",style:{color:"#1890ff",width:"30px"}},X={key:2},I=["onClick"],A=["onClick"],F=["onClick"],W=["onClick"],E=["onClick"];var K={__name:"rule",setup(t){const e=(0,l.rd)(),a=(0,i.KR)([{title:"规则名称",dataIndex:"name",width:140},{dataIndex:"partial_match",title:"模糊匹配",width:120},{dataIndex:"full_match",title:"精准匹配",width:120},{dataIndex:"all_tag_info",title:"客户标签",width:160},{dataIndex:"total",width:180},{dataIndex:"created_at",title:"创建时间",width:200},{title:"是否启用",dataIndex:"switch",width:160},{title:"操作",dataIndex:"operate",width:160,fixed:"right"}]),s=(0,i.KR)(!1),o=(0,i.KR)([]),K=(0,i.Kh)({total:0,current:1,pageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}),z=()=>{s.value=!0;let t={page:K.current,size:K.pageSize};(0,m.ig)(t).then((t=>{let e=t.data.items||[];e.map((t=>{t.status_switch_bool=1==t.switch.value})),o.value=e,K.total=Number(t.data?.total)})).finally((()=>{s.value=!1}))},q=t=>{e.push({path:"/module/keywords_tagging/ruleStore",query:{task_id:t.id}})},S=t=>{_.A.confirm({title:"提示",content:"确定删除该规则吗？",okText:"确定",cancelText:"取消",onOk:()=>{const e=v.Ay.loading("正在删除");t.switching=!0,(0,m.Bx)({id:t.id}).then((()=>{v.Ay.success("已删除"),z()})).finally((()=>{t.switching=!1,e()}))}})},R=t=>{K.current=t.current,K.pageSize=t.pageSize,z()},Q=()=>{e.push("/module/keywords_tagging/ruleStore")},T=t=>{let e=t.status_switch_bool?"开启":"关闭";const a=()=>{t.status_switch_bool=!t.status_switch_bool};_.A.confirm({title:"提示",content:`确认${e}该规则吗？`,okText:"确定",cancelText:"取消",onOk:()=>{const n=v.Ay.loading(`正在${e}`);(0,m.IP)({id:t.id,switch:t.switch.value?0:1}).then((()=>{v.Ay.success("操作完成"),z()})).finally((()=>{n()})).catch((()=>a()))},onCancel:a})},Y=(t,a)=>{let n={task_id:t.id,date_type:a};e.push({path:"/module/keywords_tagging/details",query:n})};return(0,n.sV)((()=>{z()})),(t,e)=>{const l=(0,n.g2)("a-alert"),_=(0,n.g2)("a-button"),v=(0,n.g2)("a-tooltip"),m=(0,n.g2)("a-tag"),z=(0,n.g2)("a-popover"),H=(0,n.g2)("a-switch"),O=(0,n.g2)("a-divider"),P=(0,n.g2)("a-table");return(0,n.uX)(),(0,n.CE)("div",y,[(0,n.bF)(l,{"show-icon":"",message:"通过设置关键词，对客户或者员工发送的会话记录触发了关键词的可以打上对应的标签。"}),(0,n.Lk)("div",g,[(0,n.bF)(k.A)]),(0,n.Lk)("div",h,[(0,n.bF)(_,{type:"primary",onClick:Q},{icon:(0,n.k6)((()=>[(0,n.bF)((0,i.R1)(r.A))])),default:(0,n.k6)((()=>[e[0]||(e[0]=(0,n.eW)(" 新建规则 "))])),_:1})]),(0,n.bF)(P,{class:"mt16 task-table",loading:s.value,"data-source":o.value,columns:a.value,scroll:{x:1500},pagination:K,onChange:R},{headerCell:(0,n.k6)((({column:t})=>["total"===t.dataIndex?((0,n.uX)(),(0,n.Wv)(v,{key:0},{title:(0,n.k6)((()=>e[1]||(e[1]=[(0,n.Lk)("div",null,"今日：今日触发规则的次数",-1),(0,n.Lk)("div",null,"昨天：昨日触发规则的次数",-1),(0,n.Lk)("div",null,"总触发次数：该监控总的触发次数",-1)]))),default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[e[2]||(e[2]=(0,n.eW)(" 今日/昨日/总标签数 ")),(0,n.bF)((0,i.R1)(u.A))])])),_:1})):(0,n.Q3)("",!0)])),bodyCell:(0,n.k6)((({column:t,text:e,record:a})=>["name"===t.dataIndex?((0,n.uX)(),(0,n.Wv)(v,{key:0,title:e},{default:(0,n.k6)((()=>[(0,n.Lk)("div",p,(0,c.v_)(e),1)])),_:2},1032,["title"])):"partial_match"===t.dataIndex?((0,n.uX)(),(0,n.CE)("div",f,(0,c.v_)(e.join("，")),1)):"full_match"===t.dataIndex?((0,n.uX)(),(0,n.CE)("div",b,(0,c.v_)(e.join("，")),1)):"all_tag_info"===t.dataIndex?((0,n.uX)(),(0,n.CE)("span",x,[a.all_tag_info.length>1?((0,n.uX)(),(0,n.Wv)(z,{key:0,overlayStyle:{zIndex:998}},{content:(0,n.k6)((()=>[(0,n.Lk)("div",w,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.all_tag_info.slice(1,a.all_tag_info.length),(t=>((0,n.uX)(),(0,n.Wv)(m,{style:{"white-space":"pre-wrap","margin-bottom":"5px"},color:"blue",key:t.tag_id},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(t.name),1)])),_:2},1024)))),128))])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",C,[(0,n.bF)(m,{color:"blue",style:{"margin-bottom":"0"}},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(a.all_tag_info[0]&&a.all_tag_info[0].name.length>10?a.all_tag_info[0].name.substring(0,10)+"...":a.all_tag_info[0].name),1)])),_:2},1024),(0,n.Lk)("div",L," +"+(0,c.v_)(a.all_tag_info.length-1),1)])])),_:2},1024)):1==a.all_tag_info.length?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[a.all_tag_info.length?((0,n.uX)(),(0,n.Wv)(m,{key:0,color:"blue",style:{"margin-bottom":"0"}},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(a.all_tag_info[0]&&a.all_tag_info[0].name.length>10?a.all_tag_info[0].name.substring(0,10)+"...":a.all_tag_info[0].name),1)])),_:2},1024)):(0,n.Q3)("",!0)],64)):((0,n.uX)(),(0,n.CE)("div",X," - "))])):"switch"===t.dataIndex?((0,n.uX)(),(0,n.Wv)(H,{key:4,checked:a.status_switch_bool,"onUpdate:checked":t=>a.status_switch_bool=t,"checked-children":"开","un-checked-children":"关",onChange:t=>T(a)},null,8,["checked","onUpdate:checked","onChange"])):"total"===t.dataIndex?((0,n.uX)(),(0,n.CE)(n.FK,{key:5},[(0,n.Lk)("a",{onClick:t=>Y(a,1)},(0,c.v_)(a.today_count),9,I),(0,n.bF)(O,{type:"vertical"}),(0,n.Lk)("a",{onClick:t=>Y(a,2)},(0,c.v_)(a.yesterday_count),9,A),(0,n.bF)(O,{type:"vertical"}),(0,n.Lk)("a",{onClick:t=>Y(a,0)},(0,c.v_)(a.total_count),9,F)],64)):"created_at"===t.dataIndex?((0,n.uX)(),(0,n.CE)(n.FK,{key:6},[(0,n.eW)((0,c.v_)((0,i.R1)(d())(e).format("YYYY-MM-DD HH:mm:ss")),1)],64)):"operate"===t.dataIndex?((0,n.uX)(),(0,n.CE)(n.FK,{key:7},[(0,n.Lk)("a",{class:"operate-content ml16",onClick:t=>q(a)},"编辑",8,W),(0,n.Lk)("a",{class:"operate-content ml16",onClick:t=>S(a)},"删除",8,E)],64)):(0,n.Q3)("",!0)])),_:1},8,["loading","data-source","columns","pagination"])])}}},z=a(1241);const q=(0,z.A)(K,[["__scopeId","data-v-5b7ea077"]]);var S=q,R=a(8298),Q=a(4686);const T={class:"sensitive-panel"};var Y={__name:"index",setup(t){const e=(0,l.lq)(),a=(0,i.KR)(null),c=(0,i.KR)(!1);return(0,n.sV)((()=>{let t=(0,R.t0)(e.query);e.query.sender&&e.query.sender_type&&e.query.conversation_id&&(a.value={sender:t.sender,receiver:t.receiver,sender_type:t.sender_type,receiver_type:t.receiver_type,conversation_id:t.conversation_id},delete t.sender,delete t.sender_type,delete t.receiver,delete t.receiver_type,delete t.conversation_id)})),(t,e)=>((0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(Q.A,{title:[{name:"关键词打标签"}]}),(0,n.Lk)("div",T,[c.value?((0,n.uX)(),(0,n.Wv)(s.A,{key:0})):(0,n.Q3)("",!0),(0,n.bF)(S,{defaultParams:a.value},null,8,["defaultParams"])])]))}};const H=(0,z.A)(Y,[["__scopeId","data-v-4afd2270"]]);var O=H}}]);