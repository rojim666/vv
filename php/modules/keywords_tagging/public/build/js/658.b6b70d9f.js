"use strict";(self["webpackChunkzmwk_session_archive"]=self["webpackChunkzmwk_session_archive"]||[]).push([[658],{8292:function(e,t,a){a.d(t,{A:function(){return n}});var s=a(6768);const i={class:"loading-box"};function l(e,t){const a=(0,s.g2)("a-spin");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(a)])}var r=a(1241);const d={},o=(0,r.A)(d,[["render",l],["__scopeId","data-v-3d53ffb8"]]);var n=o},4686:function(e,t,a){a.d(t,{A:function(){return c}});var s=a(6768),i=a(4232);const l={class:"_main-nav"},r={key:1,class:"title"};var d={__name:"mainNavbar",props:{title:{type:[Array,String]}},setup(e){return(t,a)=>{const d=(0,s.g2)("router-link"),o=(0,s.g2)("a-breadcrumb-item"),n=(0,s.g2)("a-breadcrumb");return(0,s.uX)(),(0,s.CE)("div",l,[Array.isArray(e.title)?((0,s.uX)(),(0,s.Wv)(n,{key:0},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.title,((e,t)=>((0,s.uX)(),(0,s.Wv)(o,{key:t},{default:(0,s.k6)((()=>[e.route?((0,s.uX)(),(0,s.Wv)(d,{key:0,to:e.route},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(e.name),1)])),_:2},1032,["to"])):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)((0,i.v_)(e.name),1)],64))])),_:2},1024)))),128))])),_:1})):((0,s.uX)(),(0,s.CE)("div",r,(0,i.v_)(e.title),1))])}}},o=a(1241);const n=(0,o.A)(d,[["__scopeId","data-v-b8774510"]]);var c=n},6268:function(e,t,a){a.d(t,{A:function(){return ct}});var s=a(6768),i=a(4232),l=a(7767),r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA5FJREFUaEPtmr1r1VAYxp/3fLSVoiAqKmixoqibdBesdHBwE1xE0FKcOihiKx1arOggCIKDi6jopFBB6CAo+B8UHQRFUfC66SQU25uccyS5SZom596bhARzpdnycXOf3/udwyF4x3PDh5awhSn0b5Ig/1pNjxVAK43m9xH8xhlS5IkffoftAwCrqWarLA/k21H8oqFrZusgw0AviQ+1Lmus0PCM2dlr1g8B/jgwdGTG7O5F64eaNwD+tfc2PPDfesBo9LtKTcFACcHvEMNqFbCVhFBLvPsQoNFA9FvB+XgVEKUDWMSHhq8EolSAlHiDhq+esLcqT5QGYBPPBD/tCdeuWqgKojQAx/Fj/qRvaYOGJ54z/PBOlcaeBMQrKfl4GUldIoD6DGCwFTJ0Vwp2Oy7QcfUUjLkUXFuRku+vF4Crz8OYW9GMQjQrBHvgnbuunjDGzEf3QNNCsqe1AvCFNvWEoZhQolk/ouLiDc2KvhZYGUehEAoS9j5Ax0E0LwV7HIpJQsRFUkK844KTUceY5B8Y8LMIUG4AW52nWLjYPOGnRUJ84j0NxteSPg9ILoAOTQqdILqID/UWgsgMYG1SjBZilSUF4WgcMsod6JPifajSYgQXgAju54bIBNCuSXl13pa4YfVJhoL1PWTOauB6bG7KBZEJwGmqGRAmbU3KWn0YTgnOl+IAnYxg8UpmiPwAQOrlyToPzkclw6f1jUyNweBJcM1lMCe4FF/WhZarXoNwILj2TEp+uVtCZwLoZKFUk2pT53UTOxTUYruZKGUE0KSU7EUpAH4zSs/4DVAiiRPiXaVGDPHl0BuWmcgfsZXW54o2u0we6FBBIgMlS2XcovESm4YwHwE6HI0ZOTt1LoA2nkg1qXQ4ePPd2mxk8YSvP2mEbuHj/6bIwlbwvXsPwBhgbkgpHkWjRGJwWzdKdIAoIr4wQDvL2BLa91piwAv7hO8JpaaJ6I0Q7GUWiyefKeQB2x85jnsBoJu2WE41uzqO046jvgLBKnf3D5plKfnBIhav0gNrn5SJZheEygIQfdwvSskv1gqgXbPzRGql4uJLXV4pLQfaNruWmeu/rJKh2ZVq+ahYFOkD3WK3p5cW13nCVVe8855b3O3moTLvl5rEZQrL+q4NgKyWquq53vfAvqtmV933R7TznrfdoPe3GmDOiGEH23ptu0G02cN3z5wRQ6vYzBn66g7i7Y/QHKvhdpu/jwqKiOCsWFkAAAAASUVORK5CYII=",d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA0lJREFUaEPtms9rFDEUx79vkmxXRaGoaEVLV4QqBSt6EISKF6GghYJgbxUFQfTgSZAeLPgPeBJFQVDRg6dCexAUFXuQKhULeisordSDgiBUt5tJnsw4o0vdH9m225mFndMw85J8P+8leS8QQvA8YtH+Fhs8g5Y1ChR+S+mTB6yxKMzsxw+cJEOB+Nw7bMoCXko1l5QVgHzch2/Ufplb13nINpL4WOu8RZ5yQ7yl0bwfA/zSYNozxG2N6P1YcxMg6eg1I9CMwDI9UNMU0oxWMuZgtTE9KSY94Gs1u5X47wzga3OEgTuAU9KbBWy/UurLSois1IczgNZmAsAOd0H8Wgo5QB4W3NvUblkLwFzU/SQRrpcbii1dBHF3+J8woqQ4X7ss9xZLAXislDhTbgit0QbYUYC3/bGhG0T8xkUSA76QYqqW9bPiAIFQbbAX1ow4rpfFbHl4OKWEGHeBrgtACKHNMQC3XUT8Z8OYVhlx2KVt3QBCCItOsibnIiSwYcYFAAeCd6VENAUrt64rgKvw2E5rE2zTvU2AUp7T2sTbaOVdiP0OMrS7VB/kiffCw+fyO1jCEdAFvwNEzyrsPvNgcVRl8KmMk5KbQlpjLWCfAFx50TKmkRW9yuLnYohE14DW5haA45Go50S4XyzQMp8mUE/0reQ0TBpgBoAMcy/hhJTiVTFAVAw+jL7llRI7UxYBew7gK1H5MAeYvrgaNRbbrbEjReXFVaW8m6kCiLLvNQADoTCmKSm9/uDVN/4YQF2R4HtKicupW8ShZosW3zcPQDgUCRwDWAIUJicGjyshB8uV2ImugdijtoDNBmYMtOjswJgFiX6lUPaQkwqAcMoU/C4mGi3KB3li7pMZ+aFSeZEagGg9/KtGCYNKiqfVaqNUAYQQFp1s/GxGyalq4iPo5DKxi8BqNqmLQDXBSeWBiof6WkUX29f3QFMwL0HYtRyBzm3rcqQ0pgcWd5d4UHfWDmCeIM5KhRcujZyPlEFnYZLyTDdFRZvLALXasBATivDdtV1NAK6drqZdE2A1vV1qrGYEmhFYpgeo4xJvTfv9iHKMwXWDxr9qgGGWOY2NjXbd4O9ljzA8wyzbF7BeeMikHSS4H2EFFuLrNr8BWArnee8fSGwAAAAASUVORK5CYII=",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAArdJREFUaEPtmj9oFEEUxr+3M+OdhAhCAgYkRLFQUBDTCSkEOzsDFooIoqWlIBYG0gUsIhYWikg6xVYQLFIIgk0QtLMQjCiIWESid+7OPJlN7ojh7vbf2+QWdstj3sz3e+/Nm9nbR/DPM1aTK9gXWDT2GlD825A+LcBZh7+fT2ENF8iSF3/oHcaaQDCkmnvK8iCfTuIHTd7i/SMBmlUS39G67tCiqZt8YNjTpp9z/4RgOnabJ6ro/Y7mGmC3o1dHoI5AQQ/UKVTQgYXNM0cgDO19EGYzrtwCaN7o4ElGu8Th2QEi+zVx1j4DCHRH6+BRXvtedkUAvgNYSSGmAeBM9+QUhigC8NJodTUFAKLIXWPwfBkQOwLghZcFsWMAZUGIAliHg87ZozpQrylAu1d6SUdCDMAB4zZybwFugrFsjLrUb39IQogBhJE9C2BpU3TLaHV40AaXghADYIdGaKOHBJoB0aLRwb2kCiUBIQaQJLasdNp1gF7VCYzrxqgXaZxSBGDZ6P4bNc3iW8f8l06MVZA6bTRs0jx5AD4CGPETS99twtDeBeFiLJrVtDH4Jg4Qhe4yEy9IXwt8EYisfQ7CdDw32eNG7fkpDlDGiRqLd/bxlkvfK6PVlSTxMWfe/4UkSmCcKdvFM1YDpWZVgC+lAkhEoqj4QhHoeCdvJCTEiwD4ScLQnQfxIgCdpjpJiRcD2ICw50B4kAQhKV4UIA2EtHhxgEEQZYgvBaAXBICnYBzpHlIZS+Wgcpr7HEiq0dv3RHe8oPjSItAR619yGFggoPMR5Q1Y3Uhzx0lyUPcqk/ckTrvARkphQhHWA421LHZpxpaWQmkWlxhTA0h4scgcdQSKeE/CttIfun27QaVbDbRvNcAc66nfGKtau4EC3Aff7BHn4RzrE22M/qpAu43vjxhVaL/fbLf5B0ryz4je82TlAAAAAElFTkSuQmCC";const n={class:"fx-ac"},c={class:"add-people flex"},f={class:"add-left"},h={class:"add-right"},p={class:"top-btn flex"},_={class:"active fir"},g=["onDragstart","onDragenter","onDragend"],u={key:0,class:"staff flex"},m={class:"left flex"},A={class:"img-wra"},v={class:"name fx-ac"},k={class:"icon"},y={key:1,class:"staff flex"},b={class:"icon"},S={key:2,class:"staff flex"},w={class:"left flex"},C={class:"name"},L={class:"icon"},D={key:3,class:"staff flex"},T={class:"left flex"},E={class:"name"},x={class:"icon"};function K(e,t,a,K,I,B){const F=(0,s.g2)("a-button"),Q=(0,s.g2)("allStaff"),U=(0,s.g2)("a-tab-pane"),R=(0,s.g2)("a-tabs"),X=(0,s.g2)("a-empty"),P=(0,s.g2)("cu-scroll"),N=(0,s.g2)("a-spin"),W=(0,s.g2)("addTag"),O=(0,s.g2)("a-modal");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(O,{width:"820px",open:B.dialogShow,"onUpdate:open":t[4]||(t[4]=e=>B.dialogShow=e),centered:"",confirmLoading:a.addConfirmLoading,onOk:B.addPeopleHandleOk,onCancel:B.addPeopleHandleCancel,class:"select-staff-new-dialog"},{title:(0,s.k6)((()=>[(0,s.Lk)("div",n,[(0,s.Lk)("div",null,(0,i.v_)(a.title||"选择员工"),1),a.group_chat?((0,s.uX)(),(0,s.CE)("a",{key:0,class:"modal_a_title ml10",onClick:t[0]||(t[0]=(...e)=>B.modalATitle&&B.modalATitle(...e))},"刷新员工数据")):(0,s.Q3)("",!0)])])),footer:(0,s.k6)((()=>[(0,s.bF)(F,{onClick:B.addPeopleHandleCancel,disabled:a.addConfirmLoading},{default:(0,s.k6)((()=>t[5]||(t[5]=[(0,s.eW)("取消")]))),_:1},8,["onClick","disabled"]),(0,s.bF)(F,{type:"primary",loading:a.addConfirmLoading,onClick:B.addPeopleHandleOk},{default:(0,s.k6)((()=>t[6]||(t[6]=[(0,s.eW)(" 确定 ")]))),_:1},8,["loading","onClick"])])),default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"alert",{},void 0,!0),(0,s.bF)(N,{spinning:I.big_spinning},{default:(0,s.k6)((()=>[(0,s.Lk)("div",c,[(0,s.Lk)("div",f,[(0,s.bF)(R,{activeKey:I.tabAcitive,"onUpdate:activeKey":t[1]||(t[1]=e=>I.tabAcitive=e)},{default:(0,s.k6)((()=>[((0,s.uX)(),(0,s.Wv)(U,{key:1,tab:"员工"},{default:(0,s.k6)((()=>[(0,s.bF)(Q,{selectData:I.selectDataAll,onSetSelect:B.setSelect,isSession:a.isSession,isAuthMode:a.isAuthMode,excludeRole:a.excludeRole,bind_type:a.bind_type,"filter-staff":a.filterStaff,group_chat:a.group_chat,ref:"tabRef_1",selectType:a.selectType,viewAppointPermissions:a.viewAppointPermissions},null,8,["selectData","onSetSelect","isSession","isAuthMode","excludeRole","bind_type","filter-staff","group_chat","selectType","viewAppointPermissions"])])),_:1}))])),_:1},8,["activeKey"])]),(0,s.Lk)("div",h,[(0,s.Lk)("div",p,[(0,s.Lk)("div",_,[t[7]||(t[7]=(0,s.eW)(" 已选择")),(0,s.Lk)("span",null,"("+(0,i.v_)(I.selectDataAll.length)+")",1)]),I.selectDataAll.length?((0,s.uX)(),(0,s.Wv)(F,{key:0,type:"link",onClick:B.deleteAll},{default:(0,s.k6)((()=>t[8]||(t[8]=[(0,s.eW)("一键移除")]))),_:1},8,["onClick"])):(0,s.Q3)("",!0)]),(0,s.bF)(P,{class:"scroll-box",ref:"scrollbarRef"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",{class:"test_wrapper",onDragover:t[3]||(t[3]=e=>B.dragover(e))},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(I.selectData,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"all-select fx-ac",key:e.id,draggable:!0,onDragstart:t=>B.dragstart(e),onDragenter:t=>B.dragenter(e,t),onDragend:t=>B.dragend(e,t),onDragover:t[2]||(t[2]=e=>B.dragover(e))},[t[16]||(t[16]=(0,s.Lk)("div",{class:"drag"},null,-1)),1===e.data_type?((0,s.uX)(),(0,s.CE)("div",u,[(0,s.Lk)("div",m,[(0,s.Lk)("div",A,[(0,s.Lk)("img",{src:l,class:(0,i.C4)({"img-c":"/static/image/default-avatar.svg"==e.avatar}),alt:""},null,2)]),(0,s.Lk)("span",v,(0,i.v_)(e.name),1)]),(0,s.Lk)("div",k,[(0,s.bF)(F,{type:"link",onClick:t=>B.selectDelete(e,e.data_type)},{default:(0,s.k6)((()=>t[9]||(t[9]=[(0,s.eW)(" 移除 ")]))),_:2},1032,["onClick"])])])):(0,s.Q3)("",!0),2===e.data_type?((0,s.uX)(),(0,s.CE)("div",y,[t[11]||(t[11]=(0,s.Lk)("div",{class:"left flex"},[(0,s.Lk)("img",{src:r,alt:"",style:{width:"36px",height:"36px"}})],-1)),(0,s.Lk)("div",b,[(0,s.bF)(F,{type:"link",onClick:t=>B.selectDelete(e,e.data_type)},{default:(0,s.k6)((()=>t[10]||(t[10]=[(0,s.eW)(" 移除 ")]))),_:2},1032,["onClick"])])])):(0,s.Q3)("",!0),3===e.data_type?((0,s.uX)(),(0,s.CE)("div",S,[(0,s.Lk)("div",w,[t[12]||(t[12]=(0,s.Lk)("img",{src:d,style:{width:"36px",height:"36px"},alt:""},null,-1)),(0,s.Lk)("div",C,(0,i.v_)(e.name),1)]),(0,s.Lk)("div",L,[(0,s.bF)(F,{type:"link",onClick:t=>B.selectDelete(e,e.data_type)},{default:(0,s.k6)((()=>t[13]||(t[13]=[(0,s.eW)(" 移除 ")]))),_:2},1032,["onClick"])])])):(0,s.Q3)("",!0),4===e.data_type?((0,s.uX)(),(0,s.CE)("div",D,[(0,s.Lk)("div",T,[t[14]||(t[14]=(0,s.Lk)("img",{src:o,alt:"",style:{width:"36px",height:"36px"}},null,-1)),(0,s.Lk)("div",E,(0,i.v_)(e.tag_name),1)]),(0,s.Lk)("div",x,[(0,s.bF)(F,{type:"link",onClick:t=>B.selectDelete(e,e.data_type)},{default:(0,s.k6)((()=>t[15]||(t[15]=[(0,s.eW)(" 移除 ")]))),_:2},1032,["onClick"])])])):(0,s.Q3)("",!0)],40,g)))),128))],32),I.selectDataAll.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(X,{key:0}))])),_:1},512)])])])),_:1},8,["spinning"]),(0,s.bF)(W,{ref:"addTagRef",onInitFunc:B.initMemberTag},null,8,["onInitFunc"])])),_:3},8,["open","confirmLoading","onOk","onCancel"])])}a(4114);var I=a(5130),B="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAVdJREFUSEu9lc1tgzAYhvOaAxInRghHG5DCBmGDdoI2E0TdoN2ADcoG7QbJBlTYgisjsAC4cgVSRQEbEOWKv+fB3x847PxgZ/5hkaAoiisAl1L6ZvphxoKyLM9t294UuG3bOAzDu4nESFCW5bGDHzto5ThO5HlerZMYCYQQKYCn3zAACWPsZbNACPEM4H0MBOCRMfY5J5m9wUhqhqyaEBJRSqspyaxgLDVDEIA7YyxeLBBCnABkuhyr91LKKAiCr9E0zgE452edAEA9BVexRl2kk6wu8hZwH6sr8smyLFcnopROTvWk4F+KXBTFTUqpK3Tq+/5lcZuqADVoTdNkaoNOTHIFIF49aAqa5/mDZVkfYwIp5SUIgnRzF3HOE0LIdQCaTY1RF/WHsixzbdvOpJQ/6xqANjWLBOqwmmpCyD4/nP5rOOev3WpIdLOx+AamwD/bdm2gadw3I4Z9GVXUaNYAAAAASUVORK5CYII=",F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAXxJREFUSEvFlc1twjAYhvN+keDKCFyjGIlsQDZoJ2iZAEUJSNzaE1LIgQ3KBu0GsEGqGMGVEXJH5KuMhIRQEjv8qL7afh5/P7ZhPXngyXyrkSBJkhGAThiGn6YHMxbM5/MBgJUCM7M/Ho/XJhIjwWw267ZarRUzdxUUwJ6IvCAIcp3ESJAkydKyrLdLGIBFGIbB3YI4jt+J6KsC9BpF0U+dpDaC69SUgPLD4eBNp9N9laRWUJaaEtA6iiK/sSCO4z4Rpbocq/miKLzJZPJbtrY2AtWaOgEz51XwU8fpAPfO/69gs9n0bdvu6KJwHKfyVldGoOAAjIrMzJ4QonmRt9uteh50hV66rjts3KZqw2636x6Px1S9oKUtCOwB+I7j3HbRFDTLshfbtr/LBMw8FEKod6pyGHWRlHJBRKMrSm1qzmuNBGmadtrtdnr5XOtS00igFkspB0R0+nCKovB7vd7jPpzzaaSUHwByIcRCdzcaR2AKvF5nVINb4WrfH349gBkc1ySJAAAAAElFTkSuQmCC",Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAXlJREFUSEvVlUFuwjAQRf0jZcMqR4BlLCI1NyA3aE/QcgJUoURi166QiCW4QXOD9gblBlSKRbYcIWsW48oIJBoljkPEot7a85/nz3gMdueFO+uzToD9fj8D4Pm+/257MWtAURQTIvrWwkQUBUGwtYFYAYqiGJ7Fh2fRw2AwCEejUdkGsQJIKTMAz9diADac89feACnlC4CPOiEAT5zzLxPEmEGNNVWt0nGc0Pf9QxPECKizpioEYMs5jzoDpJQPAHZtHut9pVQ4Ho9/am00CeR5PmkDACibxHWsVRe1QW4uch/hS6wxg9VqpevgtYHiOG581Y0ALe44jlWRiShMkqR7kYUQevYYCw0gm8/n085tqgOWy+XQdV2dRa1NAA7H4zFaLBa3PTQNEUI8MsY+625IRNMkSbLeXSSE2DDGZpVhZ7TGqosuh9brtUdEO6XUaVzbWNMJoA+naToBcPpwlFKRqTX/ZNrW49f7aZq+McbKOI61ZVbr/4+KXzY7gBlfd6c0AAAAAElFTkSuQmCC";const U={class:"all-staff"},R={class:"sess-check fx-ac"},X={class:"sel-radio-type fx-ac",style:{"margin-top":"4px"}},P={class:"sess-check-pro-title"},N={class:"title fx-ac"},W={class:"nums fx-ac"},O={class:"num"},Y={class:"fir"},M={class:"num sc-num"},H={class:"fir"},z={class:"sec fx-ac"},G={key:0,src:B,alt:""},V={key:1,src:F,alt:""},q={key:2,src:Q,alt:""},J=["onClick"],j={class:"i-left fx-ac"},Z=["onUpdate:modelValue","onChange"],$={class:"i-right flex"},ee={class:"ri-top fx-ac"},te={class:"name eliOne fx-ac"},ae={class:"eliOne"},se={class:"nums fx-ac"},ie={style:{color:"rgba(0, 0,0 ,.65)","font-weight":"500"}},le={style:{"text-align":"center",height:"18px"}},re={key:1};function de(e,t,a,r,d,o){const n=(0,s.g2)("a-input-search"),c=(0,s.g2)("a-button"),f=(0,s.g2)("a-popover"),h=(0,s.g2)("a-empty"),p=(0,s.g2)("ZmScroll"),_=(0,s.g2)("a-spin");return(0,s.uX)(),(0,s.CE)("div",U,[(0,s.bF)(n,{placeholder:"请输入员工名称进行搜索",onSearch:o.addPeopleSearch,style:{"margin-top":"-8px"},value:d.staff_list_params.keyword,"onUpdate:value":t[0]||(t[0]=e=>d.staff_list_params.keyword=e),valueModifiers:{trim:!0}},null,8,["onSearch","value"]),(0,s.Lk)("div",R,[(0,s.Lk)("div",X,[(0,s.bF)(f,{placement:"bottom"},{content:(0,s.k6)((()=>[(0,s.Lk)("div",P,[(0,s.Lk)("div",N,[t[3]||(t[3]=(0,s.eW)(" 建议选择有席位的员工，避免核心业务受干扰 ")),(0,s.bF)(c,{type:"link",style:{"margin-left":"20px"},onClick:o.openSeat},{default:(0,s.k6)((()=>t[2]||(t[2]=[(0,s.eW)(" 绑定席位 ")]))),_:1},8,["onClick"])]),(0,s.Lk)("div",W,[(0,s.Lk)("div",O,[(0,s.Lk)("div",Y,(0,i.v_)(o.bind_num),1),t[4]||(t[4]=(0,s.Lk)("div",{class:"sec"},"有效席位员工数",-1))]),(0,s.Lk)("div",M,[(0,s.Lk)("div",H,(0,i.v_)(o.unbind_num),1),t[5]||(t[5]=(0,s.Lk)("div",{class:"sec"},"到期未绑定席位员工数",-1))])])])])),_:1})]),(0,s.Lk)("div",{class:"fx-ac tit",onClick:t[1]||(t[1]=(...e)=>o.sortTap&&o.sortTap(...e))},[(0,s.Lk)("div",z,[t[6]||(t[6]=(0,s.Lk)("div",null,"客户数",-1)),0==d.sortType?((0,s.uX)(),(0,s.CE)("img",G)):(0,s.Q3)("",!0),1==d.sortType?((0,s.uX)(),(0,s.CE)("img",V)):(0,s.Q3)("",!0),2==d.sortType?((0,s.uX)(),(0,s.CE)("img",q)):(0,s.Q3)("",!0)])])]),(0,s.bF)(p,{class:"datas-item",onLoad:o.peopleListLoad,finished:d.staff_list_nomore,loading:d.loading},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.staff_list,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{class:"all-memeber fx-ac",key:e.id,onClick:(0,I.D$)((t=>o.wraperTap(e,a)),["stop"])},[(0,s.Lk)("div",j,[(0,s.bo)((0,s.Lk)("input",{class:"check-input",type:"checkbox","onUpdate:modelValue":t=>e.checked=t,onChange:t=>o.checkChange(e,t,a)},null,40,Z),[[I.lH,e.checked]]),(0,s.Lk)("img",{src:l,alt:"",class:(0,i.C4)(["img",{"img-c":"/static/image/default-avatar.svg"==e.avatar}])},null,2)]),(0,s.Lk)("div",$,[(0,s.Lk)("div",ee,[(0,s.Lk)("div",te,[(0,s.Lk)("span",ae,(0,i.v_)(e.name),1)]),(0,s.Lk)("div",se,[t[7]||(t[7]=(0,s.Lk)("div",{style:{color:"rgba(0, 0,0 ,.45)"}},"客户数：",-1)),(0,s.Lk)("div",ie,(0,i.v_)(e.cst_total),1)])])])],8,J)))),128)),d.staff_list.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(h,{key:0}))])),_:1},8,["onLoad","finished","loading"]),(0,s.Lk)("div",le,[d.staff_list_Loading?((0,s.uX)(),(0,s.Wv)(_,{key:0,size:"small"})):(0,s.Q3)("",!0),!d.staff_list_Loading&&d.staff_list.length?((0,s.uX)(),(0,s.CE)("div",re,(0,i.v_)(d.staff_list_nomore?"":"下滑加载更多"),1)):(0,s.Q3)("",!0)])])}var oe=a(144);const ne=["id"],ce={key:0,class:"loading-box"},fe={class:"zm-list-content"},he={key:1,class:"loading-box bottom"};var pe={__name:"zmScroll",props:{immediate:{type:Boolean,default:!0},loading:{type:Boolean},loadType:{type:String,default:"down"},finished:{type:Boolean},offsets:{type:Number,default:50},showLoading:{type:Boolean,default:!0},showScrollbar:{type:Boolean,default:!1}},emits:["load"],setup(e,{expose:t,emit:a}){const l=e,r=a,d=(0,oe.KR)(""),o=(0,oe.KR)(!1),n=(0,oe.KR)(!1);(0,s.sV)((()=>{d.value="zm-scroll-"+Date.now()*Math.floor(1e4*Math.random()),l.immediate&&r("load")})),(0,s.wB)((()=>l.loading),(()=>{l.loading||l.finished||(0,s.dY)((()=>{o.value=c(),o.value||r("load")}))}));const c=()=>{const e=window.document.getElementById(d.value);return e.scrollHeight>e.offsetHeight},f=e=>{if(l.finished||l.loading||n.value)return;const{scrollTop:t,scrollHeight:a,offsetHeight:s}=e.target;"down"===l.loadType?t+s>=a-l.offsets&&r("load"):"up"===l.loadType&&t<=l.offsets&&r("load")},h=()=>window.document.getElementById(d.value),p=()=>{const e=h();n.value=!0,e.scrollTop=e.scrollHeight,setTimeout((()=>{n.value=!1}),500)},_=e=>{const t=h();n.value=!0,t.scrollTop=e,setTimeout((()=>{n.value=!1}),200)};return t({getListDom:h,scrollToBottom:p,setScrollTop:_}),(t,a)=>{const l=(0,s.g2)("a-spin");return(0,s.uX)(),(0,s.CE)("div",{class:(0,i.C4)(["zm-list-container",{"hide-scrollbar":!e.showScrollbar}]),id:d.value,onScroll:f},[e.showLoading&&"up"===e.loadType?((0,s.uX)(),(0,s.CE)("div",ce,[e.loading?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.bF)(l,{size:"small"}),a[0]||(a[0]=(0,s.Lk)("span",{class:"ml4"},"正在加载...",-1))],64)):e.finished&&o.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)("已经到顶了")],64)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.Lk)("div",fe,[(0,s.RG)(t.$slots,"default")]),e.showLoading&&"down"===e.loadType?((0,s.uX)(),(0,s.CE)("div",he,[e.loading?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.bF)(l,{size:"small"}),a[1]||(a[1]=(0,s.Lk)("span",{class:"ml4"},"正在加载...",-1))],64)):e.finished&&o.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)("已经到底了")],64)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)],42,ne)}}},_e=a(1241);const ge=(0,_e.A)(pe,[["__scopeId","data-v-4c97411c"]]);var ue=ge,me=a(7875),Ae={name:"",props:["selectData","selectType","isSession","isAuthMode","excludeRole","bind_type","filterStaff","group_chat","viewAppointPermissions"],data(){return{loading:!1,staff_list:[],staff_list_params:{page:1,size:10,keyword:""},staff_list_Loading:!1,staff_list_nomore:!1,oldSelect:[],sortType:1,searchTimer:""}},components:{ZmScroll:ue},computed:{showStatus(){let e=!0;return e},bind_num(){return this.$store.state.user.staff_seat.bind_num||0},unbind_num(){return this.$store.state.user.staff_seat.unbind_num||0}},created(){this.staff_list.length||(this.loading=!1,this.getUser_get_staff_list()),this.getOldData()},watch:{selectData(){let e=this.selectData.map((e=>e.userid));for(let t=0;t<this.staff_list.length;t++){let a=this.staff_list[t];e.includes(a.userid)?a.checked=!0:a.checked=!1,this.staff_list[t]=a}},"staff_list_params.keyword"(){clearInterval(this.searchTimer),this.searchTimer=setTimeout((()=>{this.addPeopleSearch()}),500)}},methods:{addPeopleSearch(e){this.staff_list=[],this.staff_list_nomore=!1,this.staff_list_params.page=1,this.loading=!1,this.getUser_get_staff_list()},getUser_get_staff_list(){this.loading||this.staff_list_nomore||this.staff_list_Loading||(this.loading=!0,this.staff_list_Loading=!0,this.isSession&&(this.staff_list_params.chat_status=this.isSession),this.isAuthMode&&(this.staff_list_params.is_auth_mode=1),this.excludeRole&&(this.staff_list_params.exclude_role=this.excludeRole),this.group_chat&&(this.staff_list_params.group_chat=this.group_chat),this.sortType?this.staff_list_params.order_by=1==this.sortType?"DESC":"ASC":this.staff_list_params.order_by="",this.staff_list_params.order_fields="cst_total",this.viewAppointPermissions&&(this.staff_list_params.permission_userids=this.viewAppointPermissions),(0,me.Xj)(this.staff_list_params).then((e=>{if(this.staff_list_Loading=!1,!e.data.items.length)return this.staff_list_nomore=!0,this.loading=!1,!1;if(e.data&&e.data.items&&e.data.items.length){e.data.items.length<this.staff_list_params.size&&(this.staff_list_nomore=!0),this.filterStaff.key&&(e.data.items=e.data.items.filter((e=>e[this.filterStaff.key]==this.filterStaff.value))),this.staff_list=this.staff_list.concat(e.data.items);let t=e=>{this.staff_list.forEach(((t,a)=>{e.includes(t.userid)&&(t.checked=!0)}))};t(this.selectData.map((e=>e.userid)))}this.loading=!1})))},peopleListLoad(){this.staff_list_Loading||(this.staff_list_params.page++,this.loading=!1,this.getUser_get_staff_list())},getGroup(e){return e&&e.length?e.map((e=>e.name)).join(","):"--"},setCheck(e,t){let a=this.staff_list.map((e=>e.userid)),s=a.indexOf(e.userid);this.staff_list[s]&&(this.staff_list[s].checked=!1,this.staff_list[s]=this.staff_list[s])},wraperTap(e,t){this.checkChange(e,!e.checked,t)},checkChange(e,t,a){let s=JSON.parse(JSON.stringify(this.selectData));if(e.data_type=1,e.checked=t,this.staff_list[a]=e,"multiple"!==this.selectType)this.staff_list.forEach(((t,a)=>{this.staff_list[a].checked=!1,t.userid===e.userid&&(this.staff_list[a].checked=!0)})),s=[e];else{let a=s.filter((e=>1===e.data_type)).map((e=>e.userid));if(t&&!a.includes(e.userid))s.push(e);else if(!t&&a.includes(e.userid)){let t;s.forEach(((a,s)=>{a.userid===e.userid&&(t=s)})),s.splice(t,1)}}this.$emit("setSelect",s)},sortTap(){this.staff_list_Loading||(this.sortType++,this.sortType>2&&(this.sortType=0),this.staff_list=[],this.staff_list_nomore=!1,this.staff_list_params.page=1,this.loading=!1,this.getUser_get_staff_list())},getOldData(){let e={is_archive:this.isSession};this.isAuthMode&&(e.is_auth_mode=1)},oldSelectTap(e,t){e.checked=!e.checked,this.oldSelect[t]=e;let a=JSON.parse(JSON.stringify(this.selectData)),s=a.filter((e=>1===e.data_type)).map((e=>e.userid));if(s.includes(e.userid)){let t=s.indexOf(e.userid);-1!==t&&a.splice(t,1)}else e.data_type=1,"multiple"!==this.selectType?a=[e]:a.push(e);this.$emit("setSelect",a)},sessionCheck(e){this.staff_list=[],this.staff_list_nomore=!1,this.staff_list_params.page=1,this.loading=!1,this.getUser_get_staff_list()},openSeat(){window.open("/manage/index#/seatManage")}}};const ve=(0,_e.A)(Ae,[["render",de],["__scopeId","data-v-b29d2868"]]);var ke=ve;const ye={class:"framework"},be={style:{"margin-top":"12px"}},Se={class:"sess-check-pro-title"},we={class:"title fx-ac"},Ce={class:"nums fx-ac"},Le={class:"num"},De={class:"fir"},Te={class:"num sc-num"},Ee={class:"fir"},xe={class:"tree-wraper"},Ke={key:0,style:{"justify-content":"center","margin-top":"20px"},class:"fx-ac"},Ie=["onClick"],Be=["onClick"],Fe={class:"staff-list fx-ac"},Qe={class:"i-left fx-ac"},Ue=["src"],Re={class:"i-right flex"},Xe={class:"ri-top fx-ac"},Pe={class:"nums fx-ac"},Ne={style:{color:"rgba(0, 0,0 ,.65)","font-weight":"500"}},We={class:"ri-bot fx-ac"},Oe={class:"seat-bind-box mr5"},Ye={key:0,class:"bind-no"},Me={key:1,class:"interflow-bind"},He={key:2,class:"foundation-bind"},ze={class:"bm eliOne"},Ge={key:0,class:"c-j flex"},Ve={key:1,class:"p-t flex"},qe={key:0,class:"loading-btn"};function Je(e,t,a,l,r,d){const o=(0,s.g2)("a-input-search"),n=(0,s.g2)("a-button"),c=(0,s.g2)("a-popover"),f=(0,s.g2)("a-spin"),h=(0,s.g2)("a-tree");return(0,s.uX)(),(0,s.CE)("div",ye,[(0,s.bF)(o,{placeholder:"请输入组织架构进行搜索",modelValue:r.searchParams.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchParams.keyword=e),modelModifiers:{trim:!0},style:{"margin-top":"-8px"}},null,8,["modelValue"]),(0,s.Lk)("div",be,[(0,s.bF)(c,{placement:"bottom"},{content:(0,s.k6)((()=>[(0,s.Lk)("div",Se,[(0,s.Lk)("div",we,[t[3]||(t[3]=(0,s.eW)(" 建议选择有席位的员工，避免核心业务受干扰 ")),(0,s.bF)(n,{type:"link",style:{"margin-left":"20px"},onClick:d.openSeat},{default:(0,s.k6)((()=>t[2]||(t[2]=[(0,s.eW)(" 绑定席位 ")]))),_:1},8,["onClick"])]),(0,s.Lk)("div",Ce,[(0,s.Lk)("div",Le,[(0,s.Lk)("div",De,(0,i.v_)(d.bind_num),1),t[4]||(t[4]=(0,s.Lk)("div",{class:"sec"},"有效席位员工数",-1))]),(0,s.Lk)("div",Te,[(0,s.Lk)("div",Ee,(0,i.v_)(d.unbind_num),1),t[5]||(t[5]=(0,s.Lk)("div",{class:"sec"},"到期未绑定席位员工数",-1))])])])])),_:1})]),(0,s.Lk)("div",xe,[r.showTree?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ke,[(0,s.bF)(f)])),(0,s.bF)(f,{spinning:r.spinning},{default:(0,s.k6)((()=>[r.showTree?((0,s.uX)(),(0,s.Wv)(h,{key:0,checkable:"",props:r.props,checkStrictly:"",ref:"elTreeRef","load-data":d.loadNode,"tree-data":r.treeData,checkedKey:d.checkChange,"onUpdate:checkedKey":t[1]||(t[1]=e=>d.checkChange=e),"filter-tree-node":d.filterNode},{title:(0,s.k6)((({node:e,data:a})=>[(0,s.Lk)("div",{class:(0,i.C4)(["custom-tree-node",{"tree-node-30":a.show_more}])},[a.is_staff?((0,s.uX)(),(0,s.CE)("div",{key:1,class:(0,i.C4)(["staff-wrape",{"padd-b-30":a.show_more}]),onClick:t=>d.itemTap(e,a)},[(0,s.Lk)("div",Fe,[(0,s.Lk)("div",Qe,[(0,s.Lk)("img",{src:a.avatar,alt:"",class:(0,i.C4)(["img",{"img-c":"/static/image/default-avatar.svg"==a.avatar}])},null,10,Ue)]),(0,s.Lk)("div",Re,[(0,s.Lk)("div",Xe,[t[7]||(t[7]=(0,s.Lk)("div",{class:"name eliOne fx-ac",style:{"white-space":"normal"}},null,-1)),(0,s.Lk)("div",Pe,[t[6]||(t[6]=(0,s.Lk)("div",{style:{color:"rgba(0, 0,0 ,.45)"}},"客户数：",-1)),(0,s.Lk)("div",Ne,(0,i.v_)(a.external_total),1)])]),(0,s.Lk)("div",We,[(0,s.Lk)("div",Oe,[a.is_bind_license?2==a.license_type?((0,s.uX)(),(0,s.CE)("div",Me)):1==a.license_type?((0,s.uX)(),(0,s.CE)("div",He)):(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ye))]),(0,s.Lk)("div",ze,(0,i.v_)(a.alias?a.alias:""),1),1==a.role?((0,s.uX)(),(0,s.CE)("div",Ge,"超级管理员")):(0,s.Q3)("",!0),2==a.role?((0,s.uX)(),(0,s.CE)("div",Ve,"普通员工")):(0,s.Q3)("",!0)])])]),a.show_more?((0,s.uX)(),(0,s.CE)("div",qe,[(0,s.bF)(n,{type:"dashed",ref:"loading_id"+a.loading_id,icon:"redo",onClick:(0,I.D$)((t=>d.loadMoreTap(e,a)),["stop"])},{default:(0,s.k6)((()=>t[8]||(t[8]=[(0,s.eW)(" 点击加载更多 ")]))),_:2},1032,["onClick"])])):(0,s.Q3)("",!0)],10,Be)):((0,s.uX)(),(0,s.CE)("div",{key:0,onClick:t=>d.itemTap(e,a)},(0,i.v_)(a.department_name)+" ("+(0,i.v_)(a.staff_count)+")",9,Ie))],2)])),_:1},8,["props","load-data","tree-data","checkedKey","filter-tree-node"])):(0,s.Q3)("",!0)])),_:1},8,["spinning"])])])}var je={name:"",props:["selectData","selectType","isSession","isAuthMode","excludeRole","bind_type","filterStaff","group_chat","viewAppointPermissions"],data(){return{treeData:[],searchParams:{keyword:""},props:{children:"child",isLeaf:function(e,t){return e.child&&0===e.child.length}},staff_list_params:{page:0,size:20,department_type:1},staff_list_Loading:!1,staff_list_nomore:!0,textures_list:[],currTotal:0,currSelectKeys:[],department_ids:[],spinning:!1,showTree:!0}},computed:{showStatus(){let e=0==this.$store.state.user.active_corp.setting_status||3==this.$store.state.user.active_corp.setting_status;return e},bind_num(){return this.$store.state.user.staff_seat.bind_num||0},unbind_num(){return this.$store.state.user.staff_seat.unbind_num||0}},components:{},watch:{"searchParams.keyword"(){this.$refs.elTreeRef.filter(this.searchParams.keyword)},selectData(){let e=this.selectData.filter((e=>1===e.data_type)).map((e=>e.staff_id));e.forEach((e=>{this.currSelectKeys.includes(e)||(this.currSelectKeys.push(e),this.setTreeKeys())}))}},created(){this.initNode()},methods:{clearCheck(){this.currSelectKeys=[],this.setTreeKeys()},clearParKey(){this.currSelectKeys=this.currSelectKeys.filter((e=>-1!=e.indexOf("_"))),setTimeout((()=>{this.setTreeKeys()}),500)},setCheck(e,t,a){if(1===a)this.department_ids.forEach((t=>{let a=this.currSelectKeys.findIndex((a=>a===t+"_"+e.staff_id));-1!==a&&this.currSelectKeys.splice(a,1)})),this.setTreeKeys();else if(2===a){let t=this.currSelectKeys.findIndex((t=>t===e.department_id));-1!==t&&(this.currSelectKeys.splice(t,1),this.setTreeKeys())}},filterNode(e){return e.department_name?e.department_name:e.name?e.name:void 0},itemTap(e,t){if(t.disabled)return;let{department_id:a}=t;if("multiple"!==this.selectType)this.currSelectKeys=[a],this.setTreeKeys();else if(this.currSelectKeys.includes(a)){let e=this.currSelectKeys.findIndex((e=>e===a));-1!==e&&(this.currSelectKeys.splice(e,1),this.setTreeKeys())}else this.currSelectKeys.push(a),this.setTreeKeys()},checkChange(e,t){if(t)this.currSelectKeys.includes(e.department_id)||this.currSelectKeys.push(e.department_id);else{let t=this.currSelectKeys.findIndex((t=>t===e.department_id));-1!==t&&this.currSelectKeys.splice(t,1)}let a=JSON.parse(JSON.stringify(this.selectData)),{is_staff:s}=e;if(s){if(e.data_type=1,"multiple"!==this.selectType)a=[e];else{let s=a.filter((e=>1===e.data_type)).map((e=>e.staff_id));t&&!s.includes(e.staff_id)?a.push(e):!t&&s.includes(e.staff_id)&&a.splice(a.findIndex((t=>t.staff_id==e.staff_id)),1)}this.$emit("setSelect",a)}else{e.data_type=2;let s=a.filter((e=>2===e.data_type)).map((e=>e.department_id));if(t&&!s.includes(e.department_id))this.$emit("setLoading",!0),this.getCurrStaffList(e).then((t=>{e.staff_list=t,a.push(e),this.$emit("setLoading",!1),this.$emit("setSelect",a)}));else if(!t&&s.includes(e.department_id)){let t;a.forEach(((a,s)=>{a.department_id===e.department_id&&(t=s)})),a.splice(t,1),this.$emit("setSelect",a)}}},setTreeKeys(){this.$refs.elTreeRef.setCheckedKeys(this.currSelectKeys)},getFrameWorkList(){this.spinning=!0;let e={};this.isSession&&(e.is_session=this.isSession),this.isAuthMode&&(e.is_auth_mode=1);let t={msg:"成功",res:0,data:{list:[{department_id:"1",department_order:"100000000",department_parent_id:"0",department_name:"武汉铁杵磨针网络科技有限公司",staff_count:26,child:[{department_id:"2",department_order:"100000000",department_parent_id:"1",department_name:"测试",child:[{department_id:"4",department_order:"100000000",department_parent_id:"2",department_name:"测试1",child:[{department_id:"5",department_order:"100000000",department_parent_id:"4",department_name:"测试11",child:[],staff_count:1}],staff_count:2}],staff_count:4},{department_id:"3",department_order:"99999000",department_parent_id:"1",department_name:"开发",child:[],staff_count:9}]}]}};if(this.spinning=!1,t&&t.data&&t.data.list){this.textures_list=t.data.list;let e=[],a=t=>{t.forEach((t=>{t.disabled=1*t.staff_count>500||"multiple"!==this.selectType,e.push(t.department_id),t.child&&t.child.length?a(t.child):delete t.child}))};return a(t.data.list),this.department_ids=e,Promise.resolve(t.data.list)}},setNodeSty(){this.$nextTick((()=>{let e=document.querySelectorAll(".a-tree-node__content");e.forEach((e=>{e.getElementsByTagName("label")[0].style.marginTop=0}));let t=document.querySelectorAll(".tree-node-30");t.forEach((e=>{let t=e.parentNode.getElementsByTagName("label");t[0].style.marginTop="-40px"}))}))},async loadMoreTap(e,t){this.$refs["loading_id"+t.loading_id].$el.__vue__.sLoading=!0;let a=e.parent.childNodes.map((e=>e.data));a.forEach((e=>e.show_more=!1)),this.staff_list_nomore=!1,this.staff_list_params.department_id=t.par_department_id,this.staff_list_params.page=t.cur_page+1;let s=await this.getUser_get_staff_list();s.forEach(((e,a)=>{e.child=[],e.is_staff=!0,e.par_department_id=t.par_department_id,e.cur_page=t.cur_page+1,e.department_id=t.par_department_id+"_"+e.staff_id,e.loading_id=e.staff_id})),s[s.length-1]&&(s[s.length-1].show_more=!this.staff_list_nomore);let i=[...a,...s];this.$refs.elTreeRef.updateKeyChildren(t.par_department_id,i),this.setNodeSty()},async initNode(){let e=await this.getFrameWorkList();this.treeData=e},async loadNode(e,t){this.staff_list_nomore=!1,this.staff_list_params.department_id=e.department_id,this.staff_list_params.page=1;let a=await this.getUser_get_staff_list();a.forEach(((t,a)=>{t.child=[],t.is_staff=!0,t.par_department_id=e.department_id,t.cur_page=1,t.department_id=e.department_id+"_"+t.staff_id,t.loading_id=t.staff_id}));let s=e.child||[];a[a.length-1]&&(a[a.length-1].show_more=!this.staff_list_nomore),this.treeData=[...s,...a],this.setNodeSty()},getUser_get_staff_list(){if(this.staff_list_nomore)return;if(this.staff_list_Loading)return;this.staff_list_Loading=!0,this.isSession&&(this.staff_list_params.is_session=this.isSession),this.excludeRole&&(this.staff_list_params.exclude_role=this.excludeRole),this.bind_type&&(this.staff_list_params.bind_type=this.bind_type),this.group_chat&&(this.staff_list_params.group_chat=this.group_chat),this.viewAppointPermissions&&(this.staff_list_params.permission_staff_ids=this.viewAppointPermissions);let e={msg:"成功",res:0,data:{pagination:{curPage:1,pageSize:20,total:13,totalCount:13,hasNextPage:!1},list:[{staff_id:"3587",name:"黄思龙",user_id:"woX2IKEAAAstH9Dx0LRajnJjSgmPDbyw",avatar:"/static/image/default-avatar.svg",role:"2",encry_user_id:"",external_total:"0",alias:"",is_bind_license:!1,group:[],ready_to_bind:1,license_type:2},{staff_id:"3451",name:"Felix余鑫",user_id:"woX2IKEAAAm_uUslSAymm573gATC43vw",avatar:"/static/image/default-avatar.svg",role:"2",encry_user_id:"woX2IKEAAAm_uUslSAymm573gATC43vw",external_total:"0",alias:"",is_bind_license:!0,group:[],ready_to_bind:0,license_type:"2"},{staff_id:"3450",name:"stone",user_id:"woX2IKEAAAtvHwkoi2laqJTkWSdSi_cw",avatar:"/static/image/default-avatar.svg",role:"2",encry_user_id:"woX2IKEAAAtvHwkoi2laqJTkWSdSi_cw",external_total:"0",alias:"",is_bind_license:!1,group:[],ready_to_bind:1,license_type:2},{staff_id:"3432",name:"彭建龙1",user_id:"woX2IKEAAAsNjcTJgudtY18D4eeB-GBA",avatar:"/static/image/default-avatar.svg",role:"2",encry_user_id:"woX2IKEAAAsNjcTJgudtY18D4eeB-GBA",external_total:"0",alias:"",is_bind_license:!1,group:[],ready_to_bind:1,license_type:2},{staff_id:"3167",name:"zhanglong",user_id:"woX2IKEAAAKnG6KFdxwZAqi-TJdnADSA",avatar:"/static/image/default-avatar.svg",role:"2",encry_user_id:"woX2IKEAAAKnG6KFdxwZAqi-TJdnADSA",external_total:"0",alias:"",is_bind_license:!1,group:[],ready_to_bind:1,license_type:2},{staff_id:"3149",name:"colson",user_id:"woX2IKEAAA9Y1ZmvLwKCQQe8rYQqd2aQ",avatar:"/static/image/default-avatar.svg",role:"2",encry_user_id:"woX2IKEAAA9Y1ZmvLwKCQQe8rYQqd2aQ",external_total:"0",alias:"",is_bind_license:!1,group:[],ready_to_bind:1,license_type:2},{staff_id:"3100",name:"sizz",user_id:"woX2IKEAAAEN39PCRL-cxrsgBhqdUmMg",avatar:"/static/image/default-avatar.svg",role:"2",encry_user_id:"",external_total:"0",alias:"sizz",is_bind_license:!1,group:[],ready_to_bind:1,license_type:2},{staff_id:"3084",name:"fred",user_id:"woX2IKEAAAcN5qt6p6gBLbFMC0i8VFuQ",avatar:"/static/image/default-avatar.svg",role:"2",encry_user_id:"",external_total:"0",alias:"",is_bind_license:!1,group:[],ready_to_bind:1,license_type:2},{staff_id:"3083",name:"王小鹏测试机",user_id:"woX2IKEAAALLtiAkJFasYV_FiYsCxGEw",avatar:"/static/image/default-avatar.svg",role:"2",encry_user_id:"woX2IKEAAALLtiAkJFasYV_FiYsCxGEw",external_total:"0",alias:"",is_bind_license:!1,group:[],ready_to_bind:1,license_type:2},{staff_id:"2481",name:"钱楚",user_id:"woX2IKEAAAIeC_R9U1gvkb-iAHM9hdcg",avatar:"/static/image/default-avatar.svg",role:"2",encry_user_id:"woX2IKEAAAIeC_R9U1gvkb-iAHM9hdcg",external_total:"0",alias:"",is_bind_license:!1,group:[],ready_to_bind:1,license_type:2},{staff_id:"1893",name:"老贾",user_id:"woX2IKEAAAFNWOLr07oLgsdR5OCJgCkQ",avatar:"/static/image/default-avatar.svg",role:"2",encry_user_id:"woX2IKEAAAFNWOLr07oLgsdR5OCJgCkQ",external_total:"0",alias:"",is_bind_license:!1,group:[],ready_to_bind:1,license_type:2},{staff_id:"1889",name:"王进华",user_id:"woX2IKEAAAzc9fAQaEkE63j_g5SeXo6Q",avatar:"/static/image/default-avatar.svg",role:"2",encry_user_id:"",external_total:"0",alias:"Fox",is_bind_license:!1,group:[],ready_to_bind:1,license_type:2},{staff_id:"1888",name:"时光",user_id:"woX2IKEAAAe7bfgnclYNTM512bBfODtg",avatar:"/static/image/default-avatar.svg",role:"2",encry_user_id:"",external_total:"0",alias:"",is_bind_license:!1,group:[],ready_to_bind:1,license_type:2}]}};if(this.staff_list_Loading=!1,e.data&&e.data.list&&e.data.list.length){e.data.list.length<this.staff_list_params.size&&(this.staff_list_nomore=!0),this.filterStaff.key&&(e.data.list=e.data.list.filter((e=>e[this.filterStaff.key]==this.filterStaff.value)));let t=t=>{e.data.list.forEach((e=>{t.includes(e.staff_id)&&(this.department_ids.forEach((t=>{let a=t+"_"+e.staff_id;this.currSelectKeys.includes(a)||this.currSelectKeys.push(a)})),this.setTreeKeys())}))};return t(this.selectData.map((e=>e.staff_id))),this.currTotal=e.data.pagination.total,Promise.resolve(e.data.list)}return Promise.resolve([])},getCurrStaffList(e){let t={page:1,size:1e3,department_id:e.department_id};return this.isSession&&(t.is_session=this.isSession),this.excludeRole&&(t.exclude_role=this.excludeRole),this.bind_type&&(t.bind_type=this.bind_type),this.group_chat&&(t.group_chat=this.group_chat),this.viewAppointPermissions&&(t.permission_staff_ids=this.viewAppointPermissions),this.$api.user_get_staff_list(t).then((e=>Promise.resolve(e.data.list))).catch((e=>Promise.resolve([])))},sessionCheck(e){this.showTree=!1,setTimeout((e=>{this.showTree=!0}),500)},openSeat(){window.open("/manage/index#/seatManage")}}};const Ze=(0,_e.A)(je,[["render",Je],["__scopeId","data-v-2130d9e8"]]);var $e=Ze;const et={class:"cont fx-ac",style:{"margin-top":"10px"}};function tt(e,t,a,i,l,r){const d=(0,s.g2)("a-input"),o=(0,s.g2)("a-modal");return(0,s.uX)(),(0,s.Wv)(o,{open:l.visible,"onUpdate:open":t[1]||(t[1]=e=>l.visible=e),"confirm-loading":l.confirmLoading,onOk:r.handleOk,width:"472px",onCancel:r.handleCancel},{default:(0,s.k6)((()=>[t[3]||(t[3]=(0,s.Lk)("div",{slot:"title",class:"fx-ac"},[(0,s.Lk)("div",{class:"fir-tit"},"创建标签"),(0,s.Lk)("div",{class:"sec-tit"},"确定将当前已选员工新建标签？")],-1)),(0,s.Lk)("div",et,[t[2]||(t[2]=(0,s.Lk)("div",{class:"fir fx-ac"},[(0,s.Lk)("span",null,"*"),(0,s.eW)("标签名称：")],-1)),(0,s.bF)(d,{maxLength:32,style:{width:"262px"},modelValue:l.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.name=e),modelModifiers:{trim:!0},placeholder:"请输入标签名称"},null,8,["modelValue"])])])),_:1},8,["open","confirm-loading","onOk","onCancel"])}var at=a(7277);const st={user_get_corp_group_list:(e={})=>at.Ay.post("/user/get-corp-group-list",e),user_edit_corp_group:(e={})=>at.Ay.post("/user/edit-corp-group",e),user_add_corp_group:(e={})=>at.Ay.post("/user/add-corp-group",e),user_del_corp_group:(e={})=>at.Ay.post("/user/del-corp-group",e),user_get_staff_list:(e={})=>at.Ay.get("/user/get-staff-list",{params:e}),user_get_simple_staff_list:(e={})=>at.Ay.get("/user/get-simple-staff-list",{params:e}),user_add_group_member:(e={})=>at.Ay.post("/user/add-group-member",e),user_remove_staff_group:(e={})=>at.Ay.post("/user/remove-staff-group",e),user_get_group_by_staff:(e={})=>at.Ay.post("/user/get-group-by-staff",e),user_get_corp_group_list_by_page:(e={})=>at.Ay.post("/user/get-corp-group-list-by-page",e),getDepartmentList:(e={})=>at.Ay.get("/user/get-department-list",{params:e}),getStaffGroupList:(e={})=>at.Ay.get("/user/get-staff-group-list",{params:e}),bookTagGetLocalTagList:(e={})=>at.Ay.get("/corp-address-book-tag/get-local-tag-list",{params:e}),bookTagAddTag:(e={})=>at.Ay.post("/corp-address-book-tag/add-tag",e),bookTagDelTag:(e={})=>at.Ay.post("/corp-address-book-tag/delete-tag",e),bookTagEditTag:(e={})=>at.Ay.post("/corp-address-book-tag/edit-tag",e),bookTagAddStaff:(e={})=>at.Ay.post("/corp-address-book-tag/add-staff-to-tag",e),bookTagGetTagStaff:(e={})=>at.Ay.get("/corp-address-book-tag/get-local-staff-list-by-tag",{params:e}),bookTagDelTagStaff:(e={})=>at.Ay.post("/corp-address-book-tag/remove-staff-from-tag",e),bookTagGetAllTagStaff:(e={})=>at.Ay.get("/corp-address-book-tag/get-tag-staff-list",{params:e})};var it=st,lt={name:"",data(){return{visible:!1,name:"",confirmLoading:!1,staff:[]}},mounted(){},methods:{show(e){this.staff=e,this.name="",this.visible=!0},handleOk(){if(!this.name)return this.$message.error("请输入标签名称");this.createName().then((e=>{this.confirmLoading=!0,it.bookTagAddStaff({tag_id:e,staff_id_list:this.staff.map((e=>e.staff_id)).join(",")}).then((t=>{if(this.confirmLoading=!1,0==t.res)return this.$message.success("操作成功"),this.handleCancel(),void this.$emit("initFunc",e);this.$message.error(t.msg)})).catch((e=>{this.confirmLoading=!1}))}))},createName(){return new Promise(((e,t)=>{this.confirmLoading=!0,it.bookTagAddTag({tag_name:this.name}).then((a=>{this.confirmLoading=!1,0!=a.res?(t(),this.$message.error(a.msg)):e(a.data)})).catch((e=>{t(),this.confirmLoading=!1}))}))},handleCancel(){this.visible=!1}}};const rt=(0,_e.A)(lt,[["render",tt],["__scopeId","data-v-38a89d7f"]]);var dt=rt,ot={name:"selectStaffNew",components:{allStaff:ke,newFramework:$e,addTag:dt},props:{addPeopleShow:{type:Boolean,default:function(){return!1}},addConfirmLoading:{type:Boolean,default:function(){return!1}},title:{type:String,default:function(){return""}},selectType:{type:String,default:function(){return""}},isSession:{default:""},excludeRole:{default:""},bind_type:{default:""},filterStaff:{type:Object,default:function(){return{}}},group_chat:{default:""},emptyCanClose:{default:!1},isAuthMode:{default:!1},viewAppointPermissions:{type:Array,default:()=>[]},maxStaffNum:{type:Number,default:-1}},data(){return{staff_list:[],staff_list_params:{page:0,size:10,keyword:""},staff_list_Loading:!1,staff_list_nomore:!1,pageStaffSize:50,selectData:[],selectDataAll:[],searchSelectData:[],selectOnSearchVal:"",alreadyAddPeopeList:[],selectDataShow:!0,oldData:null,newData:null,tabAcitive:1,big_spinning:!1,funcShow:!1,hasSetEditData:!1,hideTagName:"",batchDelTime:null,staffNameMap:{}}},computed:{bind_num(){return this.$store.state.user.staff_seat.bind_num||0},unbind_num(){return this.$store.state.user.staff_seat.unbind_num||0},dialogShow(){return this.addPeopleShow||this.funcShow},showStatus(){let e=!0;return e}},watch:{tabAcitive(){localStorage.setItem("select-staff-tab",this.tabAcitive)}},created(){let e=localStorage.getItem("select-staff-tab");e&&(this.tabAcitive=isNaN(1*e)?1:1*e)},methods:{modalATitle(){console.log("刷新"),this.$refs.tabRef_1.addPeopleSearch()},async show(e){if(clearInterval(this.batchDelTime),this.pageStaffSize=50,this.funcShow=!0,e&&Array.isArray(e)){let t=Date.now();this.hasSetEditData=!0,e.forEach((e=>{e.data_type=1,e.id=t++})),this.selectDataAll=e,this.selectData=this.selectDataAll.slice(0,this.pageStaffSize)}},dragstart(e){this.oldData=e},dragenter(e,t){this.newData=e,t.preventDefault()},dragend(e,t){if(this.oldData!==this.newData){let e=this.selectData.indexOf(this.oldData),t=this.selectDataAll.indexOf(this.oldData),a=this.selectData.indexOf(this.newData),s=this.selectDataAll.indexOf(this.newData),i=[...this.selectData],l=[...this.selectDataAll];i.splice(e,1),l.splice(t,1),i.splice(a,0,this.oldData),l.splice(s,0,this.oldData),this.selectData=[...i],this.selectDataAll=[...l]}},dragover(e){e.preventDefault()},setSelect(e){let t=Date.now();if(this.maxStaffNum>-1&&e.length>this.maxStaffNum&&(e=e.slice(0,this.maxStaffNum),this.$emit("limit")),this.selectDataAll=e.map((e=>{e.id=t++})),this.selectOnSearchVal){let e=this.selectDataAll.filter((e=>-1!==e.name.indexOf(this.selectOnSearchVal)));this.searchSelectData=e}this.selectDataAll=e,this.selectData=e.slice(0,e.length>50?this.selectData.length:this.pageStaffSize)},setLoading(e){this.big_spinning=e},setScrollbarClear(){this.$nextTick((()=>{this.$refs.scrollbarRef&&this.$refs.scrollbarRef.wrap&&(this.$refs.scrollbarRef.wrap.scrollTop=0)})),this.selectDataAll=[],this.batchDelData()},batchDelData(){this.batchDelTime&&clearInterval(this.batchDelTime),this.batchDelTime=setInterval((()=>{0!=this.selectData.length?this.selectData.splice(0,100):clearInterval(this.batchDelTime)}),500)},addPeopleHandleCancel(e){this.setScrollbarClear(),this.funcShow&&(this.funcShow=!1),this.$emit("cancel"),this.$emit("cancelSelect")},selectDelete(e,t){let a=this.selectData.findIndex((t=>t.id===e.id));if(this.searchSelectData.length){this.searchSelectData.splice(a,1);let t=this.selectData.map((e=>e.userid));this.selectData.splice(t.indexOf(e.userid),1),this.selectDataAll.splice(t.indexOf(e.userid),1)}else this.selectData.splice(a,1),this.selectDataAll.splice(a,1);console.log("ss",e,t),this.$refs["tabRef_1"]&&this.$refs["tabRef_1"].setCheck(e,a,t)},deleteAll(){console.log("ss1",this.selectDataAll),this.selectDataAll.forEach(((e,t)=>{this.$refs["tabRef_1"]&&this.$refs["tabRef_1"].setCheck(e,t,e.data_type)})),this.selectData=[],this.selectDataAll=[]},selectOnSearch(e){if(!e)return void(this.searchSelectData=[]);let t=this.selectDataAll.filter((t=>-1!==t.name.indexOf(e)));this.searchSelectData=t},addPeopleHandleOk(){let e=[];this.selectDataAll.forEach((t=>{1===t.data_type?e.push(t):2!==t.data_type&&3!==t.data_type&&4!==t.data_type||(e=e.concat(t.staff_list))}));let t=[],a=[];e.forEach((e=>{t.includes(e.userid)||(t.push(e.userid),a.push(e))})),this.$emit("selectStaff",a),this.$emit("change",a),this.emptyCanClose&&0==a.length||(this.setScrollbarClear(),this.funcShow&&(this.funcShow=!1),this.$emit("cancleSelect"))},setOldData(e){e.length&&this.$api.setLatelyChooseUser({user_id:e.map((e=>e.userid))}).then((e=>{this.$refs["tabRef_1"]&&this.$refs["tabRef_1"].getOldData()}))},createTag(){let e=[];this.selectDataAll.forEach((t=>{1===t.data_type?e.push(t):2!==t.data_type&&3!==t.data_type&&4!==t.data_type||(e=e.concat(t.staff_list))}));let t=[],a=[];return e.forEach((e=>{t.includes(e.userid)||(t.push(e.userid),a.push(e))})),a.length?a.some((e=>!e.userid))?this.$message.warning("选择的员工数据userid为空"):void this.$refs.addTagRef.show(a):this.$message.warning("请选择员工")},initMemberTag(e){e&&this.$emit("initFunc",e),this.$refs["tabRef_4"]&&this.$refs["tabRef_4"].initMember(),"/staffManage"==this.$route.path&&(this.funcShow=!1)},hideTag(e){this.hideTagName=e,setTimeout((()=>{this.$refs["tabRef_4"]&&this.$refs["tabRef_4"].$refs.elTreeRef_2.filter(e)}),500)},scrollLoad(){this.selectData.length!=this.selectDataAll.length&&(this.selectData=this.selectData.concat(this.selectDataAll.slice(this.selectData.length,this.selectData.length+this.pageStaffSize)))}},beforeUnmount(){clearInterval(this.batchDelTime)}};const nt=(0,_e.A)(ot,[["render",K],["__scopeId","data-v-14ca2758"]]);var ct=nt},7767:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA/tJREFUaEPtmk9slEUUwH/v6y5tFVpNgVBppSghYsVIqBFMTIxWapp4oD0RNfHmSSIHT8YT9mRiI568mZhIPLQk1aBgSbyBAmIIBaKEFi1UKaZxqdDt7n7PvG9dUpXdnV1m20/jO33ZfTPzfvNm5r35IyyQfQe1/rccz4qGPUAv0A7UL9RZgu8sMClwgCA8tCJIfLW7V9IFO6TwMfCFtobpcI8IrwJNS2CoS5PTqnwYZIPBN/tlygpEAJHx8zok6HaXWpZaR5GjQUb6DUKiYZMJ94rwxlIbVkn7qrzTnAzekoHPMj0aBh8BqyqpIAa6KZVglwyM5N5V2BMDg6oxYZ+8PZIbBzqqKR2DMhcMIAMkYmBMNSakDUCrKRmXMv8DFPPEsgQ0JPP/zmdhzgZqDcS7B+oTsOk+4aHWvwKcnoRzV5Rc6JfCK0BTA+zsCmi79/ZGTs7AgZMhqZv+ILwB3LUMujuFzW230qvbWjl2WRk9q8zO+YHwBrC1Q3iuU6gLShsWKhw5q3xz0c/i5w1g1zbhgVWle7+ANn5N+fhozABe6w5oanQbFjfSMHjYz2z25oHXdwTc7bj1sUn8/mjMAF7cLnSsdBtCF6eV/cdiNoSeeFB4ZpMQlGHIhjA6ppyciBnA8gbofljoXFua4Myk8uWYcmPebb6U0/I2B6whC2R9XQFriwSyyzMwHNdAVugpiwMb1wiPtkNjMr/pvpmB81P5VCJtZwwexasHFtqVrPsTQPIAltDVQmoGYNmoecM8YAmc754vdIY3AFt91jQTLaUrV4DlRhGA5AEs95n5HS5cVaav53/zIXcM0HoPbFgtPLZOoknsIqk5ODWhfP+LcjXlUqK4TtUANsYt739qo9DcmO/pSsSSOvPI8XHlux+r3ydUBWA9/cKWgPtbKBu4XKAu/Qojp6rbJ1QMYMZb3m+971POTWkUoSvd7FQEYJPypSeL77juFMg88cnXIZmce00VAdim5fnNfnv+76Z+fjrk20s1AFjdBH1bA1qWu1dejea1WRg+EUZLrYs4e+Dx9RKN/XLZpkujpXQsPthcOOGYrToD9HfZUUlth08B7PzPytBxt3TbGWDHI4J5YTHEYsPhM54BbPncsk5ob6kdgipcmckHt9lbt2Cl23P2gFVj479wXFgLDAOwpM+itKtUBOBa6WLq/ScA7JDP8UBkMfvWqa2seeAHYIOTevyUJgzgPWB3/Gwrb5HAoOz9VHtFw/0xvp0vRjItQfjyv/+i2/AGhrRVk7lhkG3lHRcHDT0mmbq+6KlBwRyDCBPRY49XYnxrn1Llg3889ihA2LuJ6/PZpwmCHoWdQFsM7pAtqfgJwoMqiUPNdRxZ+NzmD26ItxWYaSgLAAAAAElFTkSuQmCC"}}]);