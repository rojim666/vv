"use strict";(self["webpackChunkzmwk_session_archive"]=self["webpackChunkzmwk_session_archive"]||[]).push([[546],{109:function(e,l,a){a.r(l),a.d(l,{default:function(){return Re}});var t=a(6768),u=a(144),s=a(1387),n=a(8292),i=(a(4114),a(4232)),o=a.p+"img/tag-delete.bb5149a3.svg",c=a.p+"img/tag-delete-active.1ff7d2c1.svg",r=a(848),d={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},v=d,p=a(4827);function g(e){for(var l=1;l<arguments.length;l++){var a=null!=arguments[l]?Object(arguments[l]):{},t=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),t.forEach((function(l){f(e,l,a[l])}))}return e}function f(e,l,a){return l in e?Object.defineProperty(e,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[l]=a,e}var _=function(e,l){var a=g({},e,l.attrs);return(0,t.bF)(p.A,g({},a,{icon:v}),null)};_.displayName="CaretRightOutlined",_.inheritAttrs=!1;var k=_,h=a(7875);const y={class:"zm-cst-tag-modal"},m={key:0,class:"selected-box"},b={class:"zm-tip-info"},C={class:"mt8"},w={key:1,class:"selected-box"},x={class:"zm-tip-info"},F={class:"mt8"},X={key:2,class:"zm-filter-box"},K={class:"zm-filter-item"},R={class:"tag-group zm-flex-center"},W=["onClick"],E={key:0,class:"tag-items mt8"};var S={__name:"selectTagModal",props:{immediate:{type:Boolean,default:!1},selectType:{type:String,default:"tag"},keys:{type:Array,default:()=>[]},groupKeys:{type:Array,default:()=>[]}},emits:["change"],setup(e,{expose:l,emit:a}){const s=a,o=e,c=(0,u.KR)(!1),d=(0,u.KR)(!1),v=(0,u.KR)([]),p=(0,u.KR)([]),g=(0,u.KR)([]),f=(0,u.KR)({}),_=(0,u.KR)({}),S=(0,u.KR)([]),L=(0,u.KR)([]),A=(0,u.KR)([]),T=(0,u.Kh)({keyword:""}),O=()=>"tag"===o.selectType,U=()=>"group"===o.selectType;function I(){c.value=!0,Q()}async function Q(){if(await B(),S.value=[],L.value=[],A.value=[],o.keys.length)for(let e of o.keys)f.value[e]&&(S.value.push(e),L.value.push(f.value[e]));if(o.groupKeys.length)for(let e of o.groupKeys)_.value[e]&&(_.value[e].selected=!0,A.value.push(_.value[e]));o.immediate&&q()}function z(){c.value=!1,q()}function q(){s("change",{tagKeys:S.value,tags:L.value,groups:A.value,groupKeys:A.value.map((e=>e.group_id))})}async function B(){d.value=!0,await(0,h.g0)().then((e=>{let l=e.data||[];f.value=[];let a=e=>{_.value[e.group_id]=e};O()&&(a=e=>{e.tag.map((e=>f.value[e.id]=e))}),l.map((e=>{e.selected=!1,g.value.push(e.group_id),a(e)})),v.value=l,D()})).finally((()=>{d.value=!1}))}function D(){if(d.value=!0,T.keyword=T.keyword.trim(),T.keyword){let e;p.value=[];for(let l of v.value)if(l.group_name.indexOf(T.keyword)>-1)p.value.push(l);else{e=[];for(let a of l.tag)a.name.indexOf(T.keyword)>-1&&e.push(a);e.length>0&&p.value.push({...l,tag:e})}}else p.value=v.value;d.value=!1}function j(e){const l=g.value.indexOf(e.group_id);l>-1?g.value.splice(l,1):g.value.push(e.group_id)}function V(e){if(e.selected)A.value.push(e);else{let l=A.value.findIndex((l=>l.group_id===e.group_id));A.value.splice(l,1)}U()||(e.selected?e.tag.map((e=>{S.value.includes(e.id)||(S.value.push(e.id),L.value.push(e))})):e.tag.map((e=>{let l=S.value.indexOf(e.id);l>-1&&(S.value.splice(l,1),L.value.splice(l,1))})))}function N(e,l){if(!O())return;const a=S.value.indexOf(e.id);if(a>-1)S.value.splice(a,1),L.value.splice(a,1),l.selected=!1;else{S.value.push(e.id),L.value.push(e);const a=l.tag.map((e=>e.id));let t=0;S.value.map((e=>{a.includes(e)&&(t+=1)})),t===a.length&&(l.selected=!0)}}function P(e,l,a){e.preventDefault(),S.value.splice(a,1),L.value.splice(a,1)}function $(e,l){e.preventDefault(),l.selected=!1,V(l)}return(0,t.sV)((()=>{o.immediate&&Q()})),l({show:I,init:Q}),(l,a)=>{const s=(0,t.g2)("a-tag"),o=(0,t.g2)("a-input-search"),f=(0,t.g2)("a-checkbox"),_=(0,t.g2)("a-empty"),h=(0,t.g2)("a-modal");return(0,t.uX)(),(0,t.Wv)(h,{open:c.value,"onUpdate:open":a[1]||(a[1]=e=>c.value=e),wrapClassName:"tag-modal-wrap",title:"tag"===e.selectType?"选择标签":"选择标签组",onOk:z,width:"800px"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",y,["tag"===e.selectType&&L.value.length>0?((0,t.uX)(),(0,t.CE)("div",m,[(0,t.Lk)("div",b,"已选择标签（"+(0,i.v_)(L.value.length)+"）",1),(0,t.Lk)("div",C,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(L.value,((e,l)=>((0,t.uX)(),(0,t.Wv)(s,{key:e.id,class:"active",closable:"",onClose:a=>P(a,e,l)},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.name),1)])),_:2},1032,["onClose"])))),128))])])):(0,t.Q3)("",!0),"group"===e.selectType&&A.value.length>0?((0,t.uX)(),(0,t.CE)("div",w,[(0,t.Lk)("div",x,"已选择标签组（"+(0,i.v_)(A.value.length)+"）",1),(0,t.Lk)("div",F,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(A.value,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.group_id,class:"active",closable:"",onClose:l=>$(l,e)},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.group_name),1)])),_:2},1032,["onClose"])))),128))])])):(0,t.Q3)("",!0),v.value.length>0?((0,t.uX)(),(0,t.CE)("div",X,[(0,t.Lk)("div",K,[(0,t.Lk)("div",null,[(0,t.bF)(o,{style:{width:"220px"},onSearch:D,allowClear:"",placeholder:"请输入标签或标签组名称",value:T.keyword,"onUpdate:value":a[0]||(a[0]=e=>T.keyword=e)},null,8,["value"])])])])):(0,t.Q3)("",!0),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(p.value,(e=>((0,t.uX)(),(0,t.CE)("div",{key:e.group_id,class:"tag-box mt8"},[(0,t.Lk)("div",R,[(0,t.Lk)("div",{onClick:l=>j(e)},[g.value.includes(e.group_id)?((0,t.uX)(),(0,t.Wv)((0,u.R1)(r.A),{key:0,class:"icon"})):((0,t.uX)(),(0,t.Wv)((0,u.R1)(k),{key:1,class:"icon"}))],8,W),(0,t.bF)(f,{checked:e.selected,"onUpdate:checked":l=>e.selected=l,onChange:()=>V(e),class:"ml8"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.group_name),1)])),_:2},1032,["checked","onUpdate:checked","onChange"])]),g.value.includes(e.group_id)?((0,t.uX)(),(0,t.CE)("div",E,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.tag,(l=>((0,t.uX)(),(0,t.Wv)(s,{onClick:a=>N(l,e),class:(0,i.C4)({active:S.value.includes(l.id)}),key:l.id},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(l.name),1)])),_:2},1032,["onClick","class"])))),128))])):(0,t.Q3)("",!0)])))),128)),d.value?((0,t.uX)(),(0,t.Wv)(n.A,{key:3})):p.value.length?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(_,{key:4,style:{"margin-top":"120px"},description:T.keyword?"暂无匹配标签数据":"暂无标签数据"},null,8,["description"]))])])),_:1},8,["open","title"])}}},L=a(1241);const A=(0,L.A)(S,[["__scopeId","data-v-967d3df8"]]);var T=A,O=a(3536),U=a(6268),I=a(7767);const Q={key:0,style:{display:"flex","flex-wrap":"wrap"}},z={key:0,class:"fx-ac",style:{flex:"1"}},q={key:0,class:"fx-ac",style:{flex:"1"}};var B={__name:"select-staff-box-normal",props:{title:{type:String,default:"选择员工"},btnText:{type:String,default:"添加员工"},btnType:{type:String,default:"dashed"},btnStyle:{type:String,default:"margin-right: 16px;"},showSelectStaff:{type:Boolean,default:!0},showClearSelectStaff:{type:Boolean,default:!1},selectType:{default:"multiple"},showStaffApproveTip:{default:!1},selectedStaffs:{type:Array,default(){return[]}},isTag:{type:Boolean,default:!0},showSeatTip:{type:Boolean,default:!1},maxShowWidth:{}},emits:"change",setup(e,{emit:l}){const a=l,s=e,n=(0,u.KR)(null),o=(0,t.EW)((()=>s.selectedStaffs)),c=e=>{o.value=e,a("change",e||[])},r=e=>{o.value.splice(e,1),a("change",o.value)},d=()=>{s.showClearSelectStaff?n.value.show([]):n.value.show(o.value)};return(0,t.sV)((()=>{})),(l,a)=>{const s=(0,t.g2)("a-button"),v=(0,t.g2)("a-avatar"),p=(0,t.g2)("a-tooltip"),g=(0,t.g2)("a-tag");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(s,{type:e.btnType,style:(0,i.Tr)(e.btnStyle),onClick:d},{default:(0,t.k6)((()=>[(0,t.bF)((0,u.R1)(O.A)),(0,t.eW)(" "+(0,i.v_)(e.btnText),1)])),_:1},8,["type","style"]),e.showSelectStaff?((0,t.uX)(),(0,t.CE)("div",Q,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.value,((l,a)=>((0,t.uX)(),(0,t.Wv)(g,{key:l.userid,closable:"",onClose:e=>r(a),style:{"margin-top":"6px"},class:(0,i.C4)(["fx-ac tag",{"red-tip":e.showSeatTip&&!l.is_bind_license}])},{default:(0,t.k6)((()=>[(0,t.bF)(p,null,{default:(0,t.k6)((()=>[e.showSeatTip?((0,t.uX)(),(0,t.CE)("div",z,[(0,t.bF)(v,{size:20,src:(0,u.R1)(I),style:{"margin-right":"4px"}},null,8,["src"]),(0,t.Lk)("span",null,(0,i.v_)(l.name),1)])):(0,t.Q3)("",!0)])),_:2},1024),e.showSeatTip?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",q,[(0,t.bF)(v,{size:20,src:(0,u.R1)(I),style:{"margin-right":"4px"}},null,8,["src"]),(0,t.Lk)("span",null,(0,i.v_)(l.name),1)]))])),_:2},1032,["onClose","class"])))),128))])):(0,t.Q3)("",!0),(0,t.bF)((0,u.R1)(U.A),{selectType:"multiple",ref_key:"setStaff",ref:n,onChange:a[0]||(a[0]=e=>c(e))},null,512)])}}};const D=(0,L.A)(B,[["__scopeId","data-v-123a009c"]]);var j=D,V=a.p+"img/tag-add.452f27ee.svg",N=a.p+"img/tag-add-active.a416ca7b.svg",P=a(8298),$=a(7694);const J={style:{display:"flex","flex-wrap":"wrap"}},M={class:"fx-ac",style:{flex:"1"}},G={class:"tag-icon-box"},H={class:"tag-icon-add"},Y=["onClick"],Z={class:"tag-icon-delete"},ee=["onClick"],le=["onClick"];var ae={__name:"select-keywords-box",props:{selecteds:{type:Array,default(){return[]}}},emits:"change",setup(e,{emit:l}){const a=e,s=l,n=(0,u.Kh)({keyword_list:[{name:""}]}),r=(0,u.KR)(!1),d=(0,u.KR)([]);function v(e){return e.filter((e=>e.name&&""!==e.name.trim()))}(0,t.wB)((()=>a.selecteds),(e=>{d.value=JSON.parse(JSON.stringify(e))}),{immediate:!0});const p=()=>{if(v(n.keyword_list).length===n.keyword_list.length-1)return $.Ay.error("请输入关键词"),!1;let e="添加";const l=n.keyword_list.map((e=>e.name));s("change",l),$.Ay.success(`${e}完成`),r.value=!1},g=(0,P.sg)(p,500);function f(e){return e.map((e=>({name:e})))}const _=()=>{a.selecteds.length&&(n.keyword_list=f(a.selecteds)),r.value=!0},k=e=>{v(n.keyword_list).length===n.keyword_list.length?n.keyword_list.push({name:""}):$.Ay.error("请输入关键词")},h=(e,l)=>{const a=$.Ay.loading("正在删除");return n.keyword_list.splice(l,1),a(),!1},y=e=>{const l=$.Ay.loading("正在删除");return d.value.splice(e,1),l(),s("change",d.value),!1};return(e,l)=>{const a=(0,t.g2)("a-button"),s=(0,t.g2)("a-tag"),v=(0,t.g2)("a-input"),p=(0,t.g2)("a-input-group"),f=(0,t.g2)("a-form-item"),m=(0,t.g2)("a-form"),b=(0,t.g2)("a-modal");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(a,{type:"dashed",style:{"margin-right":"16px"},onClick:_},{default:(0,t.k6)((()=>[(0,t.bF)((0,u.R1)(O.A)),l[1]||(l[1]=(0,t.eW)(" 添加关键词 "))])),_:1}),(0,t.Lk)("div",J,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.value,((e,l)=>((0,t.uX)(),(0,t.Wv)(s,{key:l,closable:"",onClose:e=>y(l),style:{"margin-top":"6px"},class:"fx-ac tag"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",M,[(0,t.Lk)("span",null,(0,i.v_)(e),1)])])),_:2},1032,["onClose"])))),128))]),(0,t.bF)(b,{open:r.value,"onUpdate:open":l[0]||(l[0]=e=>r.value=e),title:"添加关键词",onOk:(0,u.R1)(g)},{default:(0,t.k6)((()=>[(0,t.bF)(m,{class:"login-form",model:n,name:"lexicon",autocomplete:"off",onFinish:(0,u.R1)(g),"label-col":{span:4}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{label:"关键词：",style:{"max-height":"300px",overflow:"auto"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.keyword_list,((e,a)=>((0,t.uX)(),(0,t.CE)("div",{class:"list-item",key:a},[(0,t.bF)(p,{compact:""},{default:(0,t.k6)((()=>[(0,t.bF)(v,{placeholder:"请输入关键词",value:e.name,"onUpdate:value":l=>e.name=l},null,8,["value","onUpdate:value"])])),_:2},1024),(0,t.Lk)("div",G,[(0,t.Lk)("div",H,[l[2]||(l[2]=(0,t.Lk)("img",{class:"tag-icon",src:V,alt:""},null,-1)),(0,t.Lk)("img",{onClick:e=>k(a),class:"tag-icon tag-icon-active",src:N,alt:""},null,8,Y)]),(0,t.Lk)("div",Z,[n.keyword_list.length>1?((0,t.uX)(),(0,t.CE)("img",{key:0,onClick:l=>h(e,a),class:"tag-icon",src:o,alt:""},null,8,ee)):(0,t.Q3)("",!0),n.keyword_list.length>1?((0,t.uX)(),(0,t.CE)("img",{key:1,onClick:l=>h(e,a),class:"tag-icon tag-icon-active",src:c,alt:""},null,8,le)):(0,t.Q3)("",!0)])])])))),128))])),_:1})])),_:1},8,["model","onFinish"])])),_:1},8,["open","onOk"])])}}};const te=(0,L.A)(ae,[["__scopeId","data-v-a7b0512a"]]);var ue=te;const se={class:"foot zm-fixed-bottom-box"};function ne(e,l,a,u,s,n){return(0,t.uX)(),(0,t.CE)("div",se,[(0,t.RG)(e.$slots,"default",{},void 0,!0)])}var ie={};const oe=(0,L.A)(ie,[["render",ne],["__scopeId","data-v-4c6efffa"]]);var ce=oe,re=a(4164);const de={class:"container"},ve={class:"rule-box"},pe={key:0},ge={key:1},fe={key:2},_e={class:"tag-icon-delete"},ke=["onClick"],he=["onClick"],ye={class:"options-box"},me={class:"select-box"};var be={__name:"ruleStore",setup(e){const l=(0,s.lq)(),a=(0,s.rd)(),n=l.query,r=(0,u.KR)(null),d=(0,u.KR)(0),v=(0,u.KR)(!1),p=(0,u.KR)(!1),g=((0,u.KR)(null),(0,u.KR)([]),(0,u.KR)(1),(0,u.Kh)({id:void 0,name:"",check_chat_type:{name:"SingleChat",value:1},check_type:{name:"Custom",value:1},rules_list:[{toggle_interval:1,toggle_num:"1",tag:[],tag_ids:[]}],staff_info_list:[],staff_userid_list:[],partial_match:[],full_match:[]})),f=()=>{if(g.rules_list.length>=5)return $.Ay.success("最多可添加5条规则"),!1;g.rules_list.push({toggle_interval:1,toggle_num:"1",tag:[],tag_ids:[]})},_=(e,l)=>{const a=$.Ay.loading("正在删除");return g.rules_list.splice(l,1),a(),!1},k=()=>{},h=e=>{y.value=e,r.value[e].show()},y=(0,u.KR)(1),m=({tagKeys:e,tags:l})=>{g.rules_list[y.value].tag_ids=e,g.rules_list[y.value].tag=l,k()};function b(e){g.staff_userid_list=e.map((e=>e.userid)),g.staff_info_list=e}function C(e){g.partial_match=e}function w(e){g.full_match=e}const x=(0,u.KR)(!1),F=()=>{d.value>0&&(v.value=!0,(0,re.mo)({id:d.value}).then((e=>{try{let l=e.data||{};x.value=1==l.switch.value,(0,P.AB)(g,l)}catch(l){}})).finally((()=>{v.value=!1})))},X=()=>{a.push({path:"/module/keywords_tagging/index"})},K=()=>{g.name=g.name.trim();try{if(!g.name)throw"请输入规则名称";if(!g.staff_userid_list.length)throw"请选择生效员工";if(!g.full_match.length&&!g.partial_match.length)throw"请选择模糊匹配或精准匹配";return g.rules_list.map(((e,l)=>{if(!e.tag_ids.length)throw`请选择规则${l+1}的客户标签`})),!0}catch(e){return $.Ay.error(e),!1}};function R(e){return e.map((e=>({toggle_interval:e.toggle_interval,toggle_num:e.toggle_num,tag_ids:e.tag_ids})))}const W=()=>{try{if(!K())return;p.value=!0;let e={name:g.name,check_chat_type:g.check_chat_type.value,switch:x.value?1:0,check_type:g.check_type.value,rules_list:R(g.rules_list),staff_userid_list:g.staff_userid_list,partial_match:g.partial_match,full_match:g.full_match};d.value>0&&(e.id=d.value),(0,re.DD)(e).then((e=>{"success"===e.status&&($.Ay.success("操作成功"),setTimeout((()=>{X()}),1200))})).finally((()=>{p.value=!1}))}catch(e){$.Ay.error(e),p.value=!1}};return(0,t.sV)((()=>{d.value=n.task_id||0,d.value&&F()})),(e,l)=>{const a=(0,t.g2)("a-input"),s=(0,t.g2)("a-form-item"),n=(0,t.g2)("a-card"),d=(0,t.g2)("a-radio"),v=(0,t.g2)("a-radio-group"),y=(0,t.g2)("a-select-option"),F=(0,t.g2)("a-select"),K=(0,t.g2)("a-checkbox"),R=(0,t.g2)("a-button"),E=(0,t.g2)("a-form");return(0,t.uX)(),(0,t.CE)("div",de,[(0,t.bF)(E,{"label-col":{span:3},"wrapper-col":{span:21}},{default:(0,t.k6)((()=>[(0,t.bF)(n,{title:"基础设置",bordered:!1},{default:(0,t.k6)((()=>[(0,t.bF)(s,{required:"",label:"规则名称"},{default:(0,t.k6)((()=>[(0,t.bF)(a,{value:g.name,"onUpdate:value":l[0]||(l[0]=e=>g.name=e),placeholder:"请输入规则名称","max-length":20,style:{width:"320px"}},null,8,["value"])])),_:1}),(0,t.bF)(s,{required:"",label:"生效员工"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{selectedStaffs:g.staff_info_list,onChange:b},null,8,["selectedStaffs"])])),_:1})])),_:1}),(0,t.bF)(n,{title:"设置关键词",bordered:!1},{default:(0,t.k6)((()=>[(0,t.bF)(s,{required:"",label:"模糊匹配"},{default:(0,t.k6)((()=>[(0,t.bF)(ue,{selecteds:g.partial_match,onChange:C},null,8,["selecteds"])])),_:1}),(0,t.bF)(s,{required:"",label:"精准匹配"},{default:(0,t.k6)((()=>[(0,t.bF)(ue,{selecteds:g.full_match,onChange:w},null,8,["selecteds"])])),_:1})])),_:1}),(0,t.bF)(n,{bordered:!1},{title:(0,t.k6)((()=>l[4]||(l[4]=[(0,t.Lk)("div",null,[(0,t.eW)(" 自动打标签 "),(0,t.Lk)("span",{class:"card-title-tip"},"触发关键词次数为模糊匹配和精准匹配关键词总和")],-1)]))),default:(0,t.k6)((()=>[(0,t.bF)(s,{required:"",label:"聊天场景"},{default:(0,t.k6)((()=>[(0,t.bF)(v,{value:g.check_chat_type.value,"onUpdate:value":l[1]||(l[1]=e=>g.check_chat_type.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(d,{value:1},{default:(0,t.k6)((()=>l[5]||(l[5]=[(0,t.eW)("仅单聊")]))),_:1}),(0,t.bF)(d,{value:2},{default:(0,t.k6)((()=>l[6]||(l[6]=[(0,t.eW)("仅群聊")]))),_:1})])),_:1},8,["value"])])),_:1}),(0,t.bF)(s,{required:"",label:"生效用户"},{default:(0,t.k6)((()=>[(0,t.bF)(v,{value:g.check_type.value,"onUpdate:value":l[2]||(l[2]=e=>g.check_type.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(d,{value:1},{default:(0,t.k6)((()=>l[7]||(l[7]=[(0,t.eW)("仅客户")]))),_:1}),(0,t.bF)(d,{value:2},{default:(0,t.k6)((()=>l[8]||(l[8]=[(0,t.eW)("仅员工")]))),_:1}),(0,t.bF)(d,{value:3},{default:(0,t.k6)((()=>l[9]||(l[9]=[(0,t.eW)("客户或员工")]))),_:1})])),_:1},8,["value"])])),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(g.rules_list,((e,u)=>((0,t.uX)(),(0,t.Wv)(s,{required:"",label:`规则${u+1}`,key:u},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ve,[1==g.check_type.value?((0,t.uX)(),(0,t.CE)("span",pe,"客户每")):(0,t.Q3)("",!0),2==g.check_type.value?((0,t.uX)(),(0,t.CE)("span",ge,"员工每")):(0,t.Q3)("",!0),3==g.check_type.value?((0,t.uX)(),(0,t.CE)("span",fe,"客户或员工每")):(0,t.Q3)("",!0),(0,t.bF)(F,{value:e.toggle_interval,"onUpdate:value":l=>e.toggle_interval=l,style:{width:"80px",margin:"0 10px"}},{default:(0,t.k6)((()=>[(0,t.bF)(y,{value:1},{default:(0,t.k6)((()=>l[10]||(l[10]=[(0,t.eW)("天")]))),_:1}),(0,t.bF)(y,{value:2},{default:(0,t.k6)((()=>l[11]||(l[11]=[(0,t.eW)("周")]))),_:1}),(0,t.bF)(y,{value:3},{default:(0,t.k6)((()=>l[12]||(l[12]=[(0,t.eW)("月")]))),_:1})])),_:2},1032,["value","onUpdate:value"]),l[13]||(l[13]=(0,t.Lk)("span",null,"触发关键词",-1)),(0,t.bF)(a,{value:e.toggle_num,"onUpdate:value":l=>e.toggle_num=l,style:{width:"80px",margin:"0 10px"}},null,8,["value","onUpdate:value"]),l[14]||(l[14]=(0,t.Lk)("span",null,"次",-1)),l[15]||(l[15]=(0,t.Lk)("span",null,"自动打上标签",-1)),(0,t.bF)(F,{style:{width:"320px",margin:"0 10px"},value:e.tag_ids,"onUpdate:value":l=>e.tag_ids=l,onChange:k,onDropdownVisibleChange:e=>h(u),class:"tag-select",mode:"multiple",open:!1,"max-tag-count":1,allowClear:"",placeholder:"请选择客户标签"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.tag,(e=>((0,t.uX)(),(0,t.Wv)(y,{key:e.id,value:e.id},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.name),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value","onDropdownVisibleChange"]),(0,t.Lk)("div",_e,[g.rules_list.length>1?((0,t.uX)(),(0,t.CE)("img",{key:0,onClick:l=>_(e,u),class:"tag-icon",src:o,alt:""},null,8,ke)):(0,t.Q3)("",!0),g.rules_list.length>1?((0,t.uX)(),(0,t.CE)("img",{key:1,onClick:l=>_(e,u),class:"tag-icon tag-icon-active",src:c,alt:""},null,8,he)):(0,t.Q3)("",!0)]),(0,t.bF)(T,{ref_for:!0,ref_key:"cstTagRef",ref:r,onChange:m,keys:e.tag_ids},null,8,["keys"])])])),_:2},1032,["label"])))),128)),(0,t.bF)(s,{class:"rule-store-options-item-box"},{label:(0,t.k6)((()=>l[16]||(l[16]=[(0,t.Lk)("div",{class:"options-label"},null,-1)]))),default:(0,t.k6)((()=>[(0,t.Lk)("div",ye,[(0,t.Lk)("a",{class:"add-rule",onClick:f},"添加规则"),(0,t.Lk)("div",me,[(0,t.bF)(K,{checked:x.value,"onUpdate:checked":l[3]||(l[3]=e=>x.value=e)},{default:(0,t.k6)((()=>l[17]||(l[17]=[(0,t.eW)("任务创建后默认开启")]))),_:1},8,["checked"])])])])),_:1})])),_:1}),(0,t.bF)(s),(0,t.bF)((0,u.R1)(ce),{style:{"padding-left":"130px",left:"15px",width:"calc(100% - 30px)"}},{default:(0,t.k6)((()=>[(0,t.bF)(R,{onClick:X},{default:(0,t.k6)((()=>l[18]||(l[18]=[(0,t.eW)("取 消")]))),_:1}),(0,t.bF)(R,{onClick:W,loading:p.value,class:"ml8",type:"primary"},{default:(0,t.k6)((()=>l[19]||(l[19]=[(0,t.eW)("保 存")]))),_:1},8,["loading"])])),_:1})])),_:1})])}}};const Ce=(0,L.A)(be,[["__scopeId","data-v-7ddd50bd"]]);var we=Ce,xe=a(4686);const Fe={class:"sensitive-panel"};var Xe={__name:"ruleConfig",setup(e){const l=(0,s.lq)(),a=l.query,i=((0,t.EW)((()=>l.meta.links||[])),(0,u.KR)(!1)),o=()=>{};return(0,t.sV)((()=>{a.task_id&&o()})),(e,l)=>((0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(xe.A,{title:[{name:"关键词打标签",route:"/module/keywords_tagging/index"},{name:(0,u.R1)(a).task_id?"编辑规则":"新建规则"}]},null,8,["title"]),(0,t.Lk)("div",Fe,[i.value?((0,t.uX)(),(0,t.Wv)(n.A,{key:0})):(0,t.Q3)("",!0),(0,t.bF)(we)])]))}};const Ke=(0,L.A)(Xe,[["__scopeId","data-v-48fd1986"]]);var Re=Ke}}]);