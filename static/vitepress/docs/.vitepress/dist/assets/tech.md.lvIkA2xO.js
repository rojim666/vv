import{_ as r,c as n,j as i,a as e,b as o,w as a,a1 as s,a0 as u,B as E,o as A,G as B}from"./chunks/framework.BYD5pJMd.js";const c=JSON.parse('{"title":"技术架构","description":"","frontmatter":{},"headers":[],"relativePath":"tech.md","filePath":"tech.md"}'),d={name:"tech.md"};function h(P,l,R,T,D,p){const t=E("Mermaid");return A(),n("div",null,[l[1]||(l[1]=i("h1",{id:"技术架构",tabindex:"-1"},[e("技术架构 "),i("a",{class:"header-anchor",href:"#技术架构","aria-label":'Permalink to "技术架构"'},"​")],-1)),l[2]||(l[2]=i("h2",{id:"整体架构",tabindex:"-1"},[e("整体架构 "),i("a",{class:"header-anchor",href:"#整体架构","aria-label":'Permalink to "整体架构"'},"​")],-1)),l[3]||(l[3]=i("p",null,"本项目采用经典的前后端分离架构，前端基于 Vue3 开发单页面应用，后端采用 PHP + Golang 的混合架构，通过 Docker 实现容器化部署。",-1)),(A(),o(s,null,{default:a(()=>[B(t,{id:"mermaid-9",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20subgraph%20%22%E5%89%8D%E7%AB%AF%E5%B1%82%22%0A%20%20%20%20%20%20%20%20Vue3%5BVue3%20SPA%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20%22%E4%BC%81%E5%BE%AE%E5%9B%9E%E8%B0%83%E9%80%9A%E7%9F%A5%22%0A%20%20%20%20%20%20%20%20QW%5BWebHook%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20%22%E6%9C%8D%E5%8A%A1%E5%B1%82%22%0A%20%20%20%20%20%20%20%20subgraph%20%22RoadRunner%22%0A%20%20%20%20%20%20%20%20%20%20%20%20RR%5BHTTP%20Server%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20RR_MinIO%5BMinIO%20Plugin%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20RR_Jobs%5BJobs%20Plugin%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20RR_Batch%5BHTTPBatch%20Plugin%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20RR_WX%5BWXFinance%20Plugin%5D%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20subgraph%20%22%E5%BA%94%E7%94%A8%E5%B1%82%22%0A%20%20%20%20%20%20%20%20%20%20%20%20Yii3%5BYii3%20PHP%20Application%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20subgraph%20%22PHP%20%E6%8F%92%E4%BB%B6%E7%B3%BB%E7%BB%9F%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P_SENSITIVE%5B%E6%95%8F%E6%84%9F%E8%AF%8D%E6%8F%90%E9%86%92%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P_NOTIFY%5B%E9%80%9A%E7%9F%A5%E6%8F%92%E4%BB%B6%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20P_STAT%5B%E7%BB%9F%E8%AE%A1%E6%8F%92%E4%BB%B6%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20%22%E6%95%B0%E6%8D%AE%E5%B1%82%22%0A%20%20%20%20%20%20%20%20TS%5BTimescaleDB%5D%0A%20%20%20%20%20%20%20%20RD%5BRedis%5D%0A%20%20%20%20%20%20%20%20NATS%5BNATS%5D%0A%20%20%20%20%20%20%20%20MO%5BMinIO%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20%22%E5%A4%96%E9%83%A8%E6%9C%8D%E5%8A%A1%22%0A%20%20%20%20%20%20%20%20EXT_HTTP%5B%E4%BC%81%E5%BE%AE%E6%8E%A5%E5%8F%A3%5D%0A%20%20%20%20%20%20%20%20EXT_WX%5B%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E4%BC%9A%E8%AF%9D%E5%AD%98%E6%A1%A3%5D%0A%20%20%20%20end%0A%0A%20%20%20%20Vue3%20--%3E%7CHTTP%2FHTTPS%7C%20RR%0A%20%20%20%20QW%20--%3E%20%7CHTTP%2FHTTPS%7C%20RR%0A%20%20%20%20RR%20--%3E%20Yii3%0A%20%20%20%20%0A%20%20%20%20Yii3%20--%3E%20RR_MinIO%0A%20%20%20%20RR_MinIO%20--%3E%7C%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%7C%20MO%0A%20%20%20%20%0A%20%20%20%20Yii3%20--%3E%20RR_Jobs%0A%20%20%20%20RR_Jobs%20--%3E%7C%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%7C%20NATS%0A%20%20%20%20%0A%20%20%20%20Yii3%20--%3E%20RR_Batch%0A%20%20%20%20RR_Batch%20--%3E%7Chttp%7C%20EXT_HTTP%0A%20%20%20%20%0A%20%20%20%20Yii3%20--%3E%20RR_WX%0A%20%20%20%20RR_WX%20--%3E%7C%E6%95%B0%E6%8D%AE%E6%8B%89%E5%8F%96%7C%20EXT_WX%0A%20%20%20%20%0A%20%20%20%20Yii3%20--%3E%7C%E8%AF%BB%E5%86%99%E6%95%B0%E6%8D%AE%7C%20TS%0A%20%20%20%20Yii3%20--%3E%7C%E7%BC%93%E5%AD%98%7C%20RD%0A%20%20%20%20%0A%20%20%20%20Yii3%20--%3E%20P_SENSITIVE%0A%20%20%20%20Yii3%20--%3E%20P_NOTIFY%0A%20%20%20%20Yii3%20--%3E%20P_STAT%0A%0A%20%20%20%20style%20Vue3%20fill%3A%2342b983%0A%20%20%20%20style%20RR%20fill%3A%2300ADD8%0A%20%20%20%20style%20RR_MinIO%20fill%3A%2300ADD8%0A%20%20%20%20style%20RR_Jobs%20fill%3A%2300ADD8%0A%20%20%20%20style%20RR_Batch%20fill%3A%2300ADD8%0A%20%20%20%20style%20RR_WX%20fill%3A%2300ADD8%0A%20%20%20%20style%20Yii3%20fill%3A%23139B91%0A%20%20%20%20style%20TS%20fill%3A%23929199%0A%20%20%20%20style%20RD%20fill%3A%23DC382D%0A%20%20%20%20style%20NATS%20fill%3A%2327AAE1%0A%20%20%20%20style%20MO%20fill%3A%23C72C48%0A%20%20%20%20style%20EXT_HTTP%20fill%3A%23888888%0A%20%20%20%20style%20EXT_WX%20fill%3A%23888888%0A"})]),fallback:a(()=>l[0]||(l[0]=[e(" Loading... ")])),_:1})),l[4]||(l[4]=u('<h2 id="核心技术栈" tabindex="-1">核心技术栈 <a class="header-anchor" href="#核心技术栈" aria-label="Permalink to &quot;核心技术栈&quot;">​</a></h2><h3 id="_1-数据存储" tabindex="-1">1. 数据存储 <a class="header-anchor" href="#_1-数据存储" aria-label="Permalink to &quot;1. 数据存储&quot;">​</a></h3><ul><li><p><strong>主数据库</strong>：TimescaleDB（基于 PostgreSQL）</p><ul><li>强大的时序数据处理能力</li><li>实时统计视图（Continuous Aggregates） <ul><li>支持大规模数据的实时统计分析</li><li>增量更新，计算成本极低</li><li>自动维护统计结果的准确性</li><li>显著提升了复杂统计查询的性能</li></ul></li><li>继承了 PostgreSQL 的事务特性</li><li>通过自动分区提供出色的查询性能</li></ul></li><li><p><strong>缓存系统</strong>：Redis</p><ul><li>提供高速数据缓存</li><li>支持多样化的数据结构</li><li>显著提升了系统响应速度</li></ul></li><li><p><strong>文件存储</strong>：MinIO</p><ul><li>兼容 S3 协议的对象存储服务</li><li>支持接入各类云存储作为后端</li><li>统一的文件管理接口</li></ul></li></ul><h3 id="_2-消息处理" tabindex="-1">2. 消息处理 <a class="header-anchor" href="#_2-消息处理" aria-label="Permalink to &quot;2. 消息处理&quot;">​</a></h3><ul><li><strong>消息队列</strong>：NATS <ul><li>轻量级设计，运行时资源占用极低</li><li>支持多种消息模式：Pub/Sub、Queue、Request-Reply</li><li>高性能 <ul><li>单机支持数百万 msg/s</li><li>端到端延迟 &lt; 100μs</li></ul></li><li>为系统提供可靠的异步处理能力</li></ul></li></ul><h3 id="_3-应用服务" tabindex="-1">3. 应用服务 <a class="header-anchor" href="#_3-应用服务" aria-label="Permalink to &quot;3. 应用服务&quot;">​</a></h3><ul><li><p><strong>HTTP 服务器</strong>：Golang + RoadRunner</p><ul><li>基于 Go 开发的高性能应用服务器</li><li>优秀的并发处理能力</li><li>有效管理 PHP 工作进程，防止内存泄漏</li><li>插件系统 <ul><li>MinIO Plugin: 提供文件存储 RPC 服务</li><li>Jobs Plugin: 集成 NATS 消息队列，处理异步任务</li><li>HTTPBatch Plugin: 提供批量 HTTP 请求服务</li><li>WXFinance Plugin: 企业微信会话存档数据拉取服务</li></ul></li><li>与 PHP 高效通信 <ul><li>基于 Goridge 的高性能 RPC</li><li>支持多种数据格式</li></ul></li><li>内置功能 <ul><li>自动 HTTPS 证书管理</li><li>优雅重启</li><li>状态监控</li></ul></li></ul></li><li><p><strong>后端框架</strong>：Yii3</p><ul><li>基于 php8.2，利用最新特性，更快更稳定 <ul><li>构造器属性提升</li><li>命名参数</li><li>枚举类型</li><li>只读属性</li><li>类型声明和联合类型</li></ul></li><li>现代化的 PHP 框架 <ul><li>完全基于 PSR-11 标准的依赖注入和容器</li><li>符合 PSR-15 的中间件机制</li><li>PSR-17 的请求-响应处理</li><li>PSR-3 的日志接口</li><li>PSR-16 的缓存接口</li></ul></li><li>模块化设计便于功能扩展 <ul><li>灵活的路由系统</li><li>可插拔的插件系统</li></ul></li><li>开发体验 <ul><li>开箱即用的常用功能</li><li>详细的错误提示</li><li>热重载支持</li></ul></li></ul></li></ul><h3 id="_4-前端技术" tabindex="-1">4. 前端技术 <a class="header-anchor" href="#_4-前端技术" aria-label="Permalink to &quot;4. 前端技术&quot;">​</a></h3><ul><li><strong>核心框架</strong>：Vue3 <ul><li>采用 Composition API</li><li>配合 Vite 实现快速的开发构建</li><li>良好的开发体验和运行性能</li></ul></li></ul><h2 id="部署方案" tabindex="-1">部署方案 <a class="header-anchor" href="#部署方案" aria-label="Permalink to &quot;部署方案&quot;">​</a></h2><p>采用 Docker 容器化部署，各服务独立容器运行，通过 Docker Compose 进行服务编排，实现了环境统一和快速部署。</p><h2 id="技术选型优势" tabindex="-1">技术选型优势 <a class="header-anchor" href="#技术选型优势" aria-label="Permalink to &quot;技术选型优势&quot;">​</a></h2><ol><li><p><strong>高性能</strong></p><ul><li>TimescaleDB 的强大查询性能</li><li>RoadRunner 的并发处理能力</li><li>NATS 的轻量级消息处理</li></ul></li><li><p><strong>易扩展</strong></p><ul><li>MinIO 支持对接各类云存储</li><li>容器化部署便于横向扩展</li><li>模块化的架构设计</li></ul></li><li><p><strong>低维护成本</strong></p><ul><li>Docker 简化了部署和运维</li><li>成熟稳定的技术栈</li><li>完善的社区支持</li></ul></li></ol><h2 id="实际应用效果" tabindex="-1">实际应用效果 <a class="header-anchor" href="#实际应用效果" aria-label="Permalink to &quot;实际应用效果&quot;">​</a></h2><ul><li>系统运行稳定，各组件配合良好 <ul><li>服务可用性 &gt; 99.9%</li><li>平均响应时间 &lt; 50ms</li></ul></li><li>研发效率高，技术栈契合业务需求 <ul><li>支持快速迭代</li><li>便于功能扩展</li></ul></li><li>性能表现优秀，能够满足当前业务规模 <ul><li>支持每日百万级消息处理</li><li>文件存储可扩展至 PB 级</li></ul></li></ul>',15))])}const b=r(d,[["render",h]]);export{c as __pageData,b as default};
