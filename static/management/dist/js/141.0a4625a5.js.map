{"version":3,"file":"js/141.0a4625a5.js","mappings":"2nKAmEA,MAAMA,GAAUC,EAAAA,EAAAA,IAAI,CAChB,CACIC,MAAO,OACPC,UAAW,YACXC,MAAO,KAEX,CACIF,MAAO,MACPC,UAAW,YACXC,MAAO,KAEX,CACIF,MAAO,KACPC,UAAW,QACXC,MAAO,KAEX,CACIF,MAAO,MACPC,UAAW,eACXC,MAAO,KAEX,CACIF,MAAO,OACPC,UAAW,cACXC,MAAO,KAEX,CACIF,MAAO,KACPC,UAAW,KACXC,MAAO,OAGTC,GAAUJ,EAAAA,EAAAA,KAAI,GACdK,GAAOL,EAAAA,EAAAA,IAAI,IACXM,GAAQN,EAAAA,EAAAA,IAAI,IACZO,GAAaC,EAAAA,EAAAA,IAAS,CACxBC,UAAMC,IAGJC,GAAaH,EAAAA,EAAAA,IAAS,CACxBI,QAAS,EACTC,SAAU,GACVC,MAAO,EACPC,gBAAiB,CAAC,KAAM,KAAM,KAAM,OACpCC,iBAAiB,EACjBC,iBAAiB,KAGrBC,EAAAA,EAAAA,KAAU,KACNC,GAAU,IAGd,MAAMC,EAASA,KACXT,EAAWC,QAAU,EACrBO,GAAU,EAGRA,EAAWA,KACbf,EAAQiB,OAAQ,CAAI,EAGlBC,EAAcC,IAChBZ,EAAWC,QAAUW,EAAEX,QACvBD,EAAWE,SAAWU,EAAEV,SACxBM,GAAU,EAGRK,EAASC,IACXC,EAAAA,EAAMC,QAAQ,CACV1B,MAAO,KACP2B,QAAS,YACTC,KAAMA,KACgBC,EAAAA,GAAQ1B,QAAQ,OAAO,GAE/C,EAGA2B,EAAWN,GACO,GAAhBA,EAAOO,MACAF,EAAAA,GAAQG,MAAM,SAEA,KAArBR,EAAOS,UACAJ,EAAAA,GAAQG,MAAM,aADzB,EAMEE,EAAMA,CAACV,EAAQW,KACjBV,EAAAA,EAAMC,QAAQ,CACV1B,MAAO,KACP2B,QAAS,UACTC,KAAMA,KACgBC,EAAAA,GAAQ1B,QAAQ,OAAO,GAE/C,E,0qEC3JN,MAAMiC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://zmwk_session_archive/./src/views/systemctl/fileExport.vue","webpack://zmwk_session_archive/./src/views/systemctl/fileExport.vue?f2b1"],"sourcesContent":["<template>\r\n    <MainLayout title=\"文件导出记录\">\r\n        <div class=\"zm-main-content\">\r\n            <a-alert type=\"info\" show-icon\r\n                     message=\"您可以在这里查看您的导出任务，并下载导出文件；文件导出后系统只会保留7天，7天后将自动删除，请及时下载文件\"></a-alert>\r\n            <div class=\"zm-filter-box mt24\">\r\n                <div class=\"zm-filter-item\">\r\n                    <div class=\"zm-filter-label\">导出类型：</div>\r\n                    <a-select v-model:value=\"filterData.type\"\r\n                              placeholder=\"请选择导出类型\"\r\n                              style=\"width: 240px\"\r\n                              @change=\"search\">\r\n                        <a-select-option\r\n                            v-for=\"item in types\"\r\n                            :value=\"item.value\"\r\n                            :key=\"item.value\">\r\n                            {{ item.title }}\r\n                        </a-select-option>\r\n                    </a-select>\r\n                </div>\r\n            </div>\r\n            <a-table class=\"mt24\"\r\n                     :dataSource=\"list\"\r\n                     :columns=\"columns\"\r\n                     :pagination=\"pagination\"\r\n                     @change=\"tableChange\">\r\n                <template #bodyCell=\"{column, text, record, index}\">\r\n                    <a-tooltip v-if=\"column.dataIndex === 'file_name'\" :title=\"text\">\r\n                        <div class=\"zm-line-clamp2\">{{ text }}</div>\r\n                    </a-tooltip>\r\n                    <template v-else-if=\"column.dataIndex === 'state'\">\r\n                        <div class=\"status\" v-if=\"text === 1\">\r\n                            <img src=\"@/assets/image/status-wait.png\"/> 排队中\r\n                        </div>\r\n                        <div class=\"status\" v-else-if=\"text === 2\">\r\n                            <img src=\"@/assets/image/status-run.png\"/>导出中\r\n                        </div>\r\n                        <div class=\"status\" v-else-if=\"text === 3\">\r\n                            <img src=\"@/assets/image/status-ok.png\"/> 已完成\r\n                        </div>\r\n                        <div class=\"status\" v-else-if=\"text === 4\">\r\n                            <img src=\"@/assets/image/status-expired.png\"/> 已过期\r\n                        </div>\r\n                        <div class=\"status\" v-else-if=\"text === 5\">\r\n                            <img src=\"@/assets/image/status-cancel.png\"/> 已取消\r\n                        </div>\r\n                        <div class=\"status\" v-else-if=\"text === 6\">\r\n                            <img src=\"@/assets/image/status-expired.png\"/> 导出失败\r\n                        </div>\r\n                        <span v-else>--</span>\r\n                    </template>\r\n                    <template v-else-if=\"column.dataIndex === 'id'\">\r\n                        <a class=\"mr16\" v-if=\"record.state === 3\" @click=\"download(record)\">下载文件</a>\r\n                        <a class=\"mr16\" v-if=\"![1,2].includes(record.state)\" @click=\"del(record,index)\">删除记录</a>\r\n                        <a v-else @click=\"cancel(record)\">取消导出</a>\r\n                    </template>\r\n                </template>\r\n            </a-table>\r\n        </div>\r\n    </MainLayout>\r\n</template>\r\n\r\n<script setup>\r\nimport {onMounted, ref, reactive} from 'vue';\r\nimport {Modal, message} from 'ant-design-vue';\r\nimport MainLayout from \"@/components/mainLayout.vue\";\r\n\r\nconst columns = ref([\r\n    {\r\n        title: \"导出来源\",\r\n        dataIndex: \"type_text\",\r\n        width: 300,\r\n    },\r\n    {\r\n        title: \"文件名\",\r\n        dataIndex: \"file_name\",\r\n        width: 320,\r\n    },\r\n    {\r\n        title: \"状态\",\r\n        dataIndex: \"state\",\r\n        width: 200,\r\n    },\r\n    {\r\n        title: \"操作人\",\r\n        dataIndex: \"creator_name\",\r\n        width: 150,\r\n    },\r\n    {\r\n        title: \"导出时间\",\r\n        dataIndex: \"create_time\",\r\n        width: 200,\r\n    },\r\n    {\r\n        title: \"操作\",\r\n        dataIndex: \"id\",\r\n        width: 180,\r\n    },\r\n])\r\nconst loading = ref(false)\r\nconst list = ref([])\r\nconst types = ref([])\r\nconst filterData = reactive({\r\n    type: undefined,\r\n})\r\n\r\nconst pagination = reactive({\r\n    current: 1,\r\n    pageSize: 10,\r\n    total: 0,\r\n    pageSizeOptions: ['10', '20', '50', '100'],\r\n    showQuickJumper: true,\r\n    showSizeChanger: true\r\n})\r\n\r\nonMounted(() => {\r\n    loadData()\r\n})\r\n\r\nconst search = () => {\r\n    pagination.current = 1\r\n    loadData()\r\n}\r\n\r\nconst loadData = () => {\r\n    loading.value = true\r\n}\r\n\r\nconst tableChange = p => {\r\n    pagination.current = p.current\r\n    pagination.pageSize = p.pageSize\r\n    loadData()\r\n}\r\n\r\nconst cancel = record => {\r\n    Modal.confirm({\r\n        title: '提示',\r\n        content: '确认取消此导出任务',\r\n        onOk: () => {\r\n            const loadClose = message.loading('正在取消')\r\n        }\r\n    })\r\n}\r\n\r\nconst download = record => {\r\n    if (record.state != 3) {\r\n        return message.error('未导出完成')\r\n    }\r\n    if (record.file_path === \"\") {\r\n        return message.error('导出异常')\r\n    }\r\n    //window.location.href = record.file_path\r\n}\r\n\r\nconst del = (record, index) => {\r\n    Modal.confirm({\r\n        title: '提示',\r\n        content: '确认删除此记录',\r\n        onOk: () => {\r\n            const loadClose = message.loading('正在删除')\r\n        }\r\n    })\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.status {\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    color: rgba(0, 0, 0, 0.65);\r\n    display: flex;\r\n    align-items: center;\r\n    white-space: nowrap;\r\n\r\n    img {\r\n        width: 16px;\r\n        height: 16px;\r\n        margin-right: 4px;\r\n    }\r\n}\r\n</style>\r\n","import script from \"./fileExport.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./fileExport.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./fileExport.vue?vue&type=style&index=0&id=92ea5c6a&scoped=true&lang=less\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-92ea5c6a\"]])\n\nexport default __exports__"],"names":["columns","ref","title","dataIndex","width","loading","list","types","filterData","reactive","type","undefined","pagination","current","pageSize","total","pageSizeOptions","showQuickJumper","showSizeChanger","onMounted","loadData","search","value","tableChange","p","cancel","record","Modal","confirm","content","onOk","message","download","state","error","file_path","del","index","__exports__"],"sourceRoot":""}